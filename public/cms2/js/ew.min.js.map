{"version":3,"sources":["dist/js/ew.js"],"names":["ew$1","$$1","luxon","_interopDefaultLegacy","e","default","ew__default","$__default","luxon__default","DateTime$1","DateTime","Validators","__proto__","userLevelId","el","ew","checkInteger","value","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","name","trim","level","sameText","includes","toLowerCase","required","fieldName","_$el$data","$el","$p","closest","data","substring","css","hasValue","replace","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","x","z","endsWith","val","toUpperCase","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","err","checkEmails","datetime","format","checkDate","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","url","checkUrl","custom","fn","_len","arguments","length","args","Array","_key","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","minDate","minDateTime","formatPattern","HTMLElement","minValue","minFormat","parseDate","Date","fromJSDate","zone","formatDateTime","DATE_FORMAT","TIME_FORMAT","maxDate","maxDateTime","maxValue","maxFormat","parseNumber","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_defineProperty","obj","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","undefined","parent","ajaxSetup","_batch","requests","add","_func$name","call","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","cursor","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","_e$originalEvent$subm","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","_this$getElement$data","field","getElement","compileTemplates","values","list","template","isString","templates","_this$element","_this$element2","tagName","getElements","fixId","multiple","rowindex","t","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","slice","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","_ref","join","_ref2","isArray","bind","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","input","html","sanitize","prevAll","remove","next","$submenu","insertBefore","cmd","refresh","setLayout","append","one","init","hasFormData","text","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$classL","_this$_element$closes","_this$_element$closes2","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes3","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","_this$_element2$id","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","apply","addCustomError","getFieldElements","rowIndex","getCurrentRowIndex","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","action","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","String","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","getFieldElement","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","hasOwnProperty","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_AjaxLookup","$input","minWidth","maxHeight","highlight","hint","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","json","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$1","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","arr","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","MOBILE_DETECT","version","scrollIntoView","_OverlayScrollbars","OverlayScrollbars","scroll","selectAll","clearSelected","tbl","rowIndexes","r","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","headerCase","str","part","charAt","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","optionHtml","OPTION_HTML_TEMPLATE","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_forms$get$getList$pa","_obj$options$","selectedIndex","opts","autoselect","_init$headers","_init$headers$get","Headers","isApi","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","_ajaxStop","lastPageSubmit","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","content","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","innerText","left","select","execCommand","removeChild","object_value","showMessage","arg","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","ajaxSend","jqxhr","allowed","hostname","setRequestHeader","ajaxStart","ajaxStop","ajaxError","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","protocol","host","isMediumScreen","matchMedia","screenMediaQuery","promise","context","$overlay","overlayTemplate","Response","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Utils","Select2Defaults","createSelect","selectId","lookup","processResults","_data$records$length","_data$records","transport","failure","$select","_$$data$$dropdown$fin","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createFilter","_data$records$length3","_data$records3","_$$data$$dropdown$fin3","getSearchParam","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","textContent","willClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","prev","isFunction","setSearchType","searchType","phraseId","getQueryBuilderFilterInput","rule","_document$getElementB","_document$getElementB2","_span$innerHTML$repla","fldVar","tmplId","span","cloneNode","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderValueSetter","getQueryBuilderFilterValidation","callback","$value","errors","operator","nb_inputs","$invalid","applyTemplate","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","views","hasTag","jsRenderAttributes","scripts","tmpl","toggleGroup","idx","valueChanged","fobj","infix","fld","bool","oldEl","fnEl","setLanguage","submitAction","_window$msg","isPostBack","isMultiple","_success","_submit","isDismissed","removeSpaces","clearError","jquery","sortUrl","sortType","shiftKey","ctrlKey","ctrl","inlineAction","_args$evt","$btn","$detached","ewAction","$record","curindex","_fail","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","$data","Promise","resolve","prepend","_submitSuccess","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","modalDialogShow","confirmDelete","selectAllKeys","selectKey","chk","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","dispose","after","scrollHeight","deleteGridRow","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","htmlEncode","sameString","optionsHtml","MAX_OPTION_COUNT","enable2FA","TWO_FACTOR_AUTHENTICATION_TYPE","API_2FA_ACTION","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","preConfirm","API_2FA_VERIFY","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","disable2FA","API_2FA_RESET","_result$error8","_result$error9","sendOTP","_result$error10","_result$error11","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","API_ADD_ACTION","nodeName","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt4$currentTar","_args$evt5","_args$evt5$currentTar","_$dlg$data","_$dlg$data2","modalDialog","size","_caption","$lnk","caption","_hide","handleResult","_current","view","_createButtons","_button","_return","resp","lnkData","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","_data$result$files","importfiles","ok","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","_this$querySelector","_table3","_table4","removeAttribute","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","showDrillDown","pos","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error12","_result$error13","setContent","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","toggleLayout","_bootstrap$Tooltip$ge6","layout","DECIMAL_SEPARATOR","min_value","max_value","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$result2$files","_data$files3","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","Intl","NumberFormat","resolvedOptions","formatTimeSpan","allDay","to","isValid","equals","startOf","minus","interval","days","Number","isInteger","parseTime","formatCurrency","CURRENCY_FORMAT","formats","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","$i","updateChart","$debug","isMobile","isDark","fixLayoutHeight","addEventHandlers","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","startStr","endStr","startFld","endFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","_bootstrap$Popover$ge2","button","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","FormData","endpoint","btoa","fromCharCode","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","checkSubscription","unsubscribeNotification","res","unsubscribe","API_PUSH_NOTIFICATION_DELETE","SERVICE_WORKER","register","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","isNaN","createLatLng","all","MobileDetect","userAgent","mobile","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","debugMode","DEBUG","animate","panel","Collapse","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","rec","_this$data","_this$data2","toNumber","toDate","_ew$vars$tables","_ew$vars$tables$table","_ew$vars$tables$table2","_ew$vars$tables$table3","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","isNil","isNaNNumber","isFiniteNumber","multiplyByPowerOfTen","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10","numberThatIsPowerOfTen","LOG10E","toObject","entriesResolver","object","escapeRegexString","string","memoize","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat","createUnitScaleFromLocaleAbbreviations","scaleItem","scaleItemIndex","formattedStringToNumber","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","code","ordinal","merge","newObject","argsLength","truncateNumber","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes","splitStringInTwoParts","separator","indexOfSearchChar","countChars","stringChar","parsePattern","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","signRule","patternMaskAfterAbbreviationRule","abbreviationRules","compactUnit","compact","abbreviationRegExpResult","compactAuto","abbreviationRule","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","optionalFractionDigits","optionalDecimalPlacesRule","outputPatternMaskWithoutEscapedText","decimalPlacesRules","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","decimalPlacesRule","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","scaleValueWithAbbreviation","patternRules","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","k","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString","valueAsString","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem","numericString","scaleAndRoundValue","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","currentAbbreviationScale","newScaledValue","newScaledValueUnit","rescaleRoundedValue","numberToFormattedNumber","resolvedValue","localizedAbbreviationUnit","isValueNegative","signedZero","isValueZero","valueAsStringWithoutSign","removeSignIfExists","decimalPart","splitNumberIntegerAndDecimalParts","valueIntegerPartWithLeadingZeros","valueIntegerPartWithoutSign","addOrRemoveLeadingZerosToValue","valueIntegerPartWithThousandsSeparator","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","addThousandsSeparatorToValueIntegerPart","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","abbreviationLocalizedUnit","patternMaskWithSignInfo","fullFormattedValueWithoutSign","addSignInfoToFullFormattedNumber","fullFormattedValueWithNormalizedText","patternStripAndNormalizeEscapedText","bpsFormatter","regexps","unformat","patternWithEscapedBPS","timeFormatter","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero","resolveFormatOptions","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","format$1","parseFloat","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"mappings":"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","sourcesContent":["/*!\n * JavaScript for PHPMaker v2023.7.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  var _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };\n\n  var ew__default = /*#__PURE__*/_interopDefaultLegacy(ew$1);\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($$1);\n  var luxon__default = /*#__PURE__*/_interopDefaultLegacy(luxon);\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n\r\n    this.hideTabs = false; // Hide all tabs\r\n\r\n    this.showPagerTop = false; // Show pager at top\r\n\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n    // \"show\" handler (for disabled tabs)\r\n\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    }; // Set properties\r\n\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default.default.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    }; // DOM loaded\r\n\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      this.pageShow();\r\n    }; // Page show\r\n\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default.default(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    }; // Go to page by index\r\n\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n\r\n    this.gotoPageByIndex = this.gotoPage; // Go to page by element\r\n\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default.default(el).data(\"page\"), 10) || -1);\r\n    }; // Go to page by element's id or name or data-field attribute\r\n\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    }; // Toggle page\r\n\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    }; // Render\r\n\r\n    this.render = function () {\r\n      this.$form = $__default.default(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default.default($__default.default(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default.default(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n\r\n      $__default.default(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  let DateTime$1 = luxon__default.default.DateTime;\r\n  /**\r\n   * User level ID validator\r\n   */\r\n\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n            level = parseInt(elId.value.trim(), 10);\r\n\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Required validator\r\n   */\r\n\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n\r\n      let $el = $__default.default(el),\r\n          $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * File required validator\r\n   */\r\n\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\") // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Between validator\r\n   */\r\n\r\n  function between(el) {\r\n    let x, z;\r\n\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuider\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n\r\n    if (ew.hasValue(x) && $__default.default(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Password strength validator\r\n   */\r\n\r\n  function passwordStrength(el) {\r\n    let $el = $__default.default(el);\r\n\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * User name validator\r\n   */\r\n\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Password validator\r\n   */\r\n\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Email validator\r\n   */\r\n\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Emails validator\r\n   */\r\n\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Float validator\r\n   */\r\n\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        float: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Integer validator\r\n   */\r\n\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US phone validator\r\n   */\r\n\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Credit card validator\r\n   */\r\n\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US SSN validator\r\n   */\r\n\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * GUID validator\r\n   */\r\n\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * URL validator\r\n   */\r\n\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n    * Custom validator\r\n    * @param {Function} fn Function(value, ...args)\r\n    * @param {...any} args Additional arguments for the function\r\n    */\r\n\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Captcha validator\r\n   */\r\n\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min Min date\r\n   */\r\n\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n          format = el.dataset.formatPattern,\r\n          minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n            minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n\r\n      if (value && format && minDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: ew.language.phrase(\"IncorrectMinDate\").replace(\"%s\", ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max Max date\r\n   */\r\n\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n          format = el.dataset.formatPattern,\r\n          maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n            maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n\r\n      if (value && format && maxDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: ew.language.phrase(\"IncorrectMaxDate\").replace(\"%s\", ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min Min value\r\n   */\r\n\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n          minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        if (value < minValue) return {\r\n          min: ew.language.phrase(\"IncorrectMin\").replace(\"%s\", minValue)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max Max value\r\n   */\r\n\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n          maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        if (value > maxValue) return {\r\n          max: ew.language.phrase(\"IncorrectMax\").replace(\"%s\", maxValue)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId,\n    userLevelName,\n    required,\n    fileRequired,\n    mismatchPassword,\n    between,\n    passwordStrength,\n    username,\n    password,\n    email,\n    emails,\n    datetime,\n    time,\n    float,\n    range,\n    integer,\n    phone,\n    zip,\n    creditCard,\n    ssn,\n    guid,\n    regex,\n    url,\n    custom,\n    captcha,\n    recaptcha,\n    minDate,\n    maxDate,\n    min,\n    max\n  };\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    Object.defineProperty(Constructor, \"prototype\", {\r\n      writable: false\r\n    });\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n  // Global batch settings\r\n\r\n  $__default.default.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  }; // Setup method\r\n\r\n  $__default.default.batchSetup = function (options) {\r\n    return $__default.default.extend($__default.default.batchSettings, options);\r\n  }; // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $__default.default.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    } // Shift arguments if func is an object\r\n\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    } // Default options\r\n\r\n    this.options = $__default.default.extend({}, $__default.default.batchSettings, options); // Find a parent batch object, if we're nested\r\n\r\n    this.parent = $__default.default.ajaxSetup()._batch; // Requests storage\r\n\r\n    this.requests = []; // Add any requests\r\n\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n\r\n    return this;\r\n  }; // Our methods\r\n\r\n  $__default.default.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $__default.default.ajaxSetup({\r\n        _batch: this.parent || this\r\n      }); // Call the user's function\r\n\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($__default.default.ajaxSetup()._batch);\r\n      } // Remove the global _batch variable when we're not nested\r\n\r\n      if (!this.parent) {\r\n        $__default.default.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this; // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      } // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $__default.default.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        }); // Override the success callback\r\n\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText); // Child batch success functions\r\n\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          } // User's success function\r\n\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        }; // Build the Ajax request options\r\n\r\n        options = $__default.default.extend({}, this.options, options); // Create hash of requests to pass as the data in the Ajax request\r\n\r\n        if (!options.data) {\r\n          options.data = $__default.default.batchSettings.toJSON(requests);\r\n        } // Call the request\r\n\r\n        return $__default.default.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n\r\n      var instance = this; // Pass the response off to the user to parse out the responses\r\n\r\n      var responses = $__default.default.batchSettings.parse(data);\r\n\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n\r\n        ew__default.default.alert(responses == null ? void 0 : (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      } // Loop through the responses\r\n\r\n      $__default.default.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        } // Grab the stored request data\r\n\r\n        var request = instance.requests[i]; // Build statusText a la jQuery based on status code\r\n\r\n        request.xhr.statusText = statusText; // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n\r\n          (_request$settings$suc = request.settings.success) == null ? void 0 : _request$settings$suc.call(request.xhr, response, statusText);\r\n        } // Call complete\r\n\r\n        (_request$settings$com = request.settings.complete) == null ? void 0 : _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n  // ---------------\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n\r\n  var $ajax = $__default.default.ajax;\r\n\r\n  $__default.default.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    } // Set options object\r\n\r\n    options = options || {}; // Override the jQuery beforeSend method\r\n\r\n    var beforeSend = options.beforeSend;\r\n\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings); // Cancel request if user's beforeSend function returns false\r\n\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      } // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings); // Cancel this request\r\n\r\n        return false;\r\n      }\r\n    }; // Run original $.ajax method for all other requests\r\n\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n        $self = $__default.default(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n\r\n    this.element = document.getElementById(id); // HTML form or div\r\n\r\n    this.$element = $__default.default(this.element); // jQuery object of the form or div\r\n\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n\r\n    this.initSearchPanel = false; // Expanded by default\r\n\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n\r\n    this.multiPage = null; // Multi-page\r\n\r\n    this.autoSuggests = {}; // AutoSuggests\r\n\r\n    this.lists = {}; // Dynamic selection lists\r\n\r\n    this.batch = new Batch(); // For batch lookup\r\n\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n\r\n    this.enableOnInit = false; // Disable form during init\r\n\r\n    this.filterList = null; // Disable form\r\n\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $__default.default(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    }; // Enable form\r\n\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n          $elements = $__default.default(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    }; // Append hidden element with form name\r\n\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n          $form = $__default.default(form),\r\n          $dp = $__default.default(el).closest(\".ew-form\"),\r\n          name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    }; // Can submit\r\n\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n\r\n      var form = this.getForm(),\r\n          $form = $__default.default(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default.default(dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        let args = {\r\n          form: form,\r\n          result: true\r\n        },\r\n            evt = $__default.default.Event(\"beforesubmit\", {\r\n          originalEvent: e\r\n        });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n\r\n        if (!evt.isDefaultPrevented() && (result === true || $__default.default.isObject(result) && result.value)) // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n\r\n      return false;\r\n    }; // Submit\r\n\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent, _e$originalEvent$subm;\r\n\r\n      let form = this.getForm(),\r\n          formAction = e == null ? void 0 : (_e$originalEvent = e.originalEvent) == null ? void 0 : (_e$originalEvent$subm = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent$subm.formAction;\r\n\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n              method = form.method.toUpperCase(),\r\n              body = $__default.default(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    }; // Get dynamic selection list by element name or id\r\n\r\n    this.getList = function (name) {\r\n      var _this$getElement, _this$getElement$data;\r\n\r\n      if ($__default.default.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id;\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null ? void 0 : (_this$getElement$data = _this$getElement.dataset.field) == null ? void 0 : _this$getElement$data.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      return field ? this.lists[field] : {};\r\n    }; // Compile templates\r\n\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n\r\n      for (let list of lists) {\r\n        if (list.template && $__default.default.isString(list.template)) list.template = $__default.default.templates(list.template);\r\n      }\r\n    }; // Get the HTML form element\r\n\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n\r\n      return this.htmlForm;\r\n    }; // Get form element as single element\r\n\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }; // Get form element(s) as single element or array of radio/checkbox\r\n\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    }; // Fix ID\r\n\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n          ar = id.split(\" \");\r\n\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n\r\n      let prefix = $__default.default.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n\r\n      if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n\r\n      (_list = list) != null ? _list : list = $__default.default.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n\r\n      if (list.template && $__default.default.isString(list.template)) // Compile template in case updateLists() called before init()\r\n        list.template = $__default.default.templates(list.template);\r\n      let form = this.getForm(),\r\n          parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n          // Clone and fix index\r\n      ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n\r\n      id = $__default.default.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n\r\n      if (rowindex === null) // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$__default.default.isNumber(rowindex) && !$__default.default.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n\r\n      if ((form == null ? void 0 : (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector)) // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n              batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $__default.default.when(...deferreds).then(() => $__default.default(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $__default.default(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    }; // Create AutoSuggest\r\n\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }; // Init editors\r\n\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    }; // Update textareas\r\n\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Destroy editor(s)\r\n\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Show error message\r\n\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    }; // Init file upload\r\n\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $__default.default.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    }; // Set up filters\r\n\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n          data = this.filterList ? this.filterList.data : null,\r\n          $sf = $__default.default(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n          $df = $__default.default(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n          $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n          $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $__default.default.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n\r\n      if (filters.length) {\r\n        let $submenu = $__default.default('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $__default.default('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default.default('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            let body = {\r\n              cmd: \"resetfilter\",\r\n              filter: JSON.stringify(filter[1])\r\n            };\r\n            ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n              method: \"POST\",\r\n              body\r\n            }));\r\n          });\r\n        });\r\n        $__default.default('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    }; // Add event handler\r\n\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    }; // Add event handler\r\n\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    }; // Remove event handler\r\n\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    }; // Trigger event\r\n\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    }; // Init form\r\n\r\n    this.init = function () {\r\n      if (this._initiated) return; // Check form\r\n\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $__default.default(form); // Compile templates\r\n\r\n      this.compileTemplates(); // Search form\r\n\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $__default.default(\"#\" + this.id + \"_search_panel\").removeClass(\"show\"); // Hide search operator column\r\n\r\n        if (!$__default.default(\".ew-table .ew-search-operator\").text().trim()) $__default.default(\".ew-table .ew-search-operator\").parent(\"td\").hide(); // Search operators\r\n\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default.default(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      } // Multi-page\r\n\r\n      if (this.multiPage) this.multiPage.render(); // HTML editors\r\n\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n      // Dynamic selection lists\r\n\r\n      this.updateLists(); // Init file upload\r\n\r\n      this.initUpload(); // Submit/Cancel\r\n\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default.default(e.target.getAttribute(\"href\")),\r\n              $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n              $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n            form: form,\r\n            result: self.submit(e)\r\n          },\r\n              evt = $__default.default.Event(\"aftersubmit\", {\r\n            originalEvent: e\r\n          });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n\r\n      this._initiated = true; // Store form object as data\r\n\r\n      this.$element.data(\"form\", this); // Enable form\r\n\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm(); // Trigger listeners\r\n\r\n      this.trigger(\"initiated\");\r\n    }; // Add to the global forms object\r\n\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n\r\n      _defineProperty(this, \"validators\", []);\r\n\r\n      _defineProperty(this, \"_validate\", true);\r\n\r\n      this.name = fldvar;\r\n\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n\r\n      this.invalid = invalid;\r\n    }\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n\r\n    var _proto = Field.prototype;\r\n\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = { ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    ;\r\n\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    ;\r\n\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */\r\n    ;\r\n\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$classL, _this$_element$closes, _this$_element$closes2;\r\n\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element$classL = _this$_element.classList) != null && _this$_element$classL.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : (_this$_element$closes2 = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes2.innerHTML\r\n      }); // Server side error\r\n    }\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    ;\r\n\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n\r\n      if (this._element && err) {\r\n        var _this$_element$closes3;\r\n\r\n        let feedback = (_this$_element$closes3 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes3.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n    /**\r\n     * Check if the field can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Check if focused\r\n     */\r\n    ;\r\n\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n\r\n        return \"\";\r\n      }\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n      /**\r\n       * Set form element\r\n       */\r\n\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */\r\n      ,\r\n      set: function (el) {\r\n        var _this$_element2, _this$_element2$id;\r\n\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2$id = _this$_element2.id) != null && _this$_element2$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n\r\n    var _proto = Form.prototype;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    ;\r\n\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    ;\r\n\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    ;\r\n\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     */\r\n    ;\r\n\r\n    _proto.addCustomError = function addCustomError(fldvar, msg) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n            err = {\r\n          custom: msg\r\n        };\r\n        field.addError(err);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Get error\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex;\r\n\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) || // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") || // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    ;\r\n\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */\r\n    ;\r\n\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */\r\n    ;\r\n\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n            detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n          var _ew$forms$get;\r\n\r\n          return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n        });\r\n\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n\r\n        this.getFocusable(field);\r\n\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Check if the form can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */\r\n    ;\r\n\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex2;\r\n\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2) // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n\r\n      let result = true;\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      } // Save the field values of the row\r\n\r\n      if (!this.value) {\r\n        this.value = { ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = { ...this.row\r\n        };\r\n      }\r\n\r\n      this.focus();\r\n      return result;\r\n    }\r\n    /**\r\n     * Key count (number|NaN)\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n\r\n      let addcnt = 0,\r\n          inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n      action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n          // Grid-Add or Master/Detail-Add\r\n      startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        } // Validate fields\r\n\r\n        if (!this.validateFields(rowIndex)) return false; // Call customValidate event\r\n\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n\r\n        this.tryFocus(true);\r\n        return false;\r\n      } // Process detail forms\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null ? void 0 : frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex3;\r\n\r\n      (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n\r\n      if (field) {\r\n        var _rowIndex4, _field$element3;\r\n\r\n        (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n\r\n      return null;\r\n    }\r\n    /**\r\n     * Get field element of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getFieldElement = function getFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n\r\n      if (field) {\r\n        var _rowIndex5, _field$element4;\r\n\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element4 = field.element) != null ? _field$element4 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.element;\r\n      }\r\n\r\n      return null;\r\n    }\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */\r\n    ;\r\n\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n            // Inline-Add\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n            startcnt = inlineAdd ? 0 : 1,\r\n            rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex6;\r\n\r\n        (_rowIndex6 = rowIndex) != null ? _rowIndex6 : rowIndex = \"\";\r\n\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n\r\n          ew.setInvalid(field.element);\r\n        } // Process detail forms\r\n\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n      /**\r\n       * Check if invalid\r\n       */\r\n\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n\r\n    return Form;\r\n  }(FormBase);\r\n\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n\r\n      _defineProperty(this, \"fields\", []);\r\n\r\n      _defineProperty(this, \"validateRequired\", false);\r\n\r\n      _defineProperty(this, \"multiPage\", false);\r\n\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n\r\n    var _proto = FormBuilder.prototype;\r\n\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    } // Set page ID\r\n    ;\r\n\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    } // Set lists\r\n    ;\r\n\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    } // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = { ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n\r\n        this.lists = value;\r\n      }\r\n\r\n      return this;\r\n    } // Add list\r\n    ;\r\n\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    } // Set fields\r\n    ;\r\n\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    } // Add field\r\n    ;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    } // Add fields\r\n    ;\r\n\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    } // Set validate\r\n    ;\r\n\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    } // Set custom validate\r\n    ;\r\n\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    } // Set validate required\r\n    ;\r\n\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    } // Set submit\r\n    ;\r\n\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    } // Set form KeyCount name\r\n    ;\r\n\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    } // Set empty row\r\n    ;\r\n\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    } // Set multi page\r\n    ;\r\n\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    } // Set submit with Fetch API\r\n    ;\r\n\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    } // Set filter list\r\n    ;\r\n\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    } // Set initSearchPanel\r\n    ;\r\n\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    } // Set enableOnInit\r\n    ;\r\n\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    } // Build\r\n    ;\r\n\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result));\r\n      }\r\n\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n\r\n    return FormBuilder;\r\n  }();\n\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n\r\n      this.elementId = settings.id; // Id\r\n\r\n      this.form = settings.form; // Form\r\n\r\n      if ($__default.default.isString(this.form)) // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n          rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n\r\n    var _proto = AjaxLookup.prototype;\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt, ew.jsRenderHelpers) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n    /**\r\n     * Generate request\r\n     */\r\n    ;\r\n\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n    /**\r\n     * Get URL\r\n     */\r\n    ;\r\n\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default.default.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    ;\r\n\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n\r\n      return results;\r\n    }\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options Options\r\n     * @returns {Object[]}\r\n     */\r\n    ;\r\n\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n\r\n      return options;\r\n    };\r\n\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n      /**\r\n       * Lookup options\r\n       */\r\n\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n\r\n    return AjaxLookup;\r\n  }();\n\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n\r\n      let self = _assertThisInitialized(_this),\r\n          $input = $__default.default(_this.input),\r\n          $element = $__default.default(_this.element); // Properties\r\n\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element; // Save instance\r\n\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this)); // Save initial option\r\n\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true); // Add events\r\n\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n                val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      }); // Get suggestions\r\n\r\n      let async = !_this.options.length,\r\n          loadingMore = false,\r\n          timer; // Option template (\"suggestion\" template)\r\n\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $__default.default.isString(tpl)) tpl = $__default.default.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $__default.default.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n\r\n            $__default.default.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      }; // Create Typeahead\r\n\r\n      $__default.default(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset]; // Trigger \"typeahead\" event\r\n\r\n        $element.trigger(\"typeahead\", [args]); // Create Typeahead\r\n\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n\r\n        let menu = self.typeahead.menu,\r\n            $menu = menu.$node,\r\n            $dataset = $menu.find(\".tt-dataset\"),\r\n            suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n              count = self.count;\r\n\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n\r\n            (_loadingMoreTimer = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $__default.default.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                    loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    } // Set the selected item to the actual field\r\n\r\n    var _proto = AutoSuggest.prototype;\r\n\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    } // Transform suggestion\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    } // Get current suggestion count\r\n    ;\r\n\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n\r\n      return [];\r\n    } // Get more suggestions by Ajax\r\n    ;\r\n\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n          start = this.count,\r\n          settings = this.prepare(menu.query, start);\r\n      return $__default.default.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n\r\n    var _proto = Forms.prototype;\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n\r\n      if (!el) return null;\r\n      let id = $__default.default.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    ;\r\n\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ;\r\n\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return lang.inputTooLong.replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return lang.inputTooShort.replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return lang.maximumSelected.replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $__default.default.fn.select2.amd.require._defined,\r\n      Utils$3 = _defined$3['select2/utils'];\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n\r\n    _proto.render = function render(decorated) {\r\n      var $results = $__default.default('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $__default.default('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      data.results = this.sort(data.results); //***\r\n\r\n      var cols = this.options.get('columns'),\r\n          len = data.results.length,\r\n          $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $__default.default('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n\r\n        $row.append($option);\r\n\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      } // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      } // if (data.children) { //***\r\n      //   var $option = $(option);\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n      //   this.template(data, label);\r\n      //   var $children = [];\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n      //     var $child = this.option(child);\r\n      //     $children.push($child);\r\n      //   }\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n      //   $childrenContainer.append($children);\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n\r\n      this.template(data, option); // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $__default.default.fn.select2.amd.require._defined,\r\n      Utils$2 = _defined$2['select2/utils'];\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n\r\n    var _proto = ModalResults.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container); // Remove handlers\r\n\r\n      (_container$listeners$ = container.listeners['results:select']) == null ? void 0 : _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $__default.default(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n\r\n    var _proto = ModalSearch.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null ? void 0 : _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which; // Ignore events from modifier keys\r\n\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n\r\n      this._keyUpPrevented = false;\r\n    };\r\n\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override _attachPositioningHandler\r\n\r\n    var _proto = Select2AttachBody.prototype;\r\n\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n\r\n        self._resizeDropdown();\r\n      };\r\n\r\n      $__default.default(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $__default.default(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    };\r\n\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override destroy()\r\n    ;\r\n\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n\r\n      options.set('dropdownParent', $__default.default(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n\r\n    var _proto = ModalAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n\r\n    _proto.render = function render(decorated) {\r\n      let $container = $__default.default('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n\r\n        self._updateDropdown();\r\n\r\n        (_self$$search$ = self.$search[0]) == null ? void 0 : _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null ? void 0 : target.classList.add('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null ? void 0 : target.classList.remove('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $__default.default('#ew-modal-lookup-dialog');\r\n\r\n      this._updateDropdown();\r\n\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$__default.default(this).data('value')) // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = FilterAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n\r\n      (_this$_popper = this._popper) == null ? void 0 : _this$_popper.update();\r\n    } // Override _resizeDropdown()\r\n    ;\r\n\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n\r\n      this.$dropdown.css(css);\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent); // Footer\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val(),\r\n          $footer = $__default.default('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $__default.default(this).data('value');\r\n\r\n        if (value) {\r\n          // OK\r\n          $__default.default(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer); // Popper\r\n\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n          reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = DropdownAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $__default.default.fn.select2.amd.require._defined,\r\n      AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n      Utils$1 = _defined$1['select2/utils'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = FilterAllowClear.prototype;\r\n\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n\r\n      var $clear = this.$selection.find('.select2-selection__clear'); // Ignore the event if nothing has been selected\r\n\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        }; // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n\r\n        this.trigger('unselect', unselectData); // If the event was prevented, don't clear it out.\r\n\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n\r\n      var text = data.text,\r\n          html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n          $option = decorated.call(this, data); // Check HTML\r\n\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  let _defined = $.fn.select2.amd.require._defined,\r\n      ResultsList = _defined['select2/results'],\r\n      SingleSelection = _defined['select2/selection/single'],\r\n      MultipleSelection = _defined['select2/selection/multiple'],\r\n      Placeholder = _defined['select2/selection/placeholder'],\r\n      AllowClear = _defined['select2/selection/allowClear'],\r\n      SelectionSearch = _defined['select2/selection/search'],\r\n      EventRelay = _defined['select2/selection/eventRelay'],\r\n      Utils = _defined['select2/utils'],\r\n      Translation = _defined['select2/translation'],\r\n      SelectData = _defined['select2/data/select'],\r\n      ArrayData = _defined['select2/data/array'],\r\n      AjaxData = _defined['select2/data/ajax'],\r\n      Tags = _defined['select2/data/tags'],\r\n      Tokenizer = _defined['select2/data/tokenizer'],\r\n      MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n      MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n      MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n      Dropdown = _defined['select2/dropdown'],\r\n      DropdownSearch = _defined['select2/dropdown/search'],\r\n      HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n      InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n      // AttachBody = _defined['select2/dropdown/attachBody'],\r\n  MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n      SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n      CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n      DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n      TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n      Defaults = _defined['select2/defaults']; // Override select2 Defaults\r\n\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      options.dataAdapter = Utils.Decorate( // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList; // Override\r\n\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate( // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      } // Add the placeholder mixin if a placeholder was specified\r\n\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $__default.default(document),\r\n      $body = $__default.default(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\"; // Set focus\r\n\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null ? void 0 : _forms$get.tryFocus();\r\n  }); // Create select2\r\n\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n\r\n      (_$$data$$dropdown$fin = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null ? void 0 : _$$data$$dropdown$fin.focus();\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  } // Create modal lookup\r\n\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n\r\n      (_$$data$$dropdown$fin2 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin2.focus();\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Create table header filter\r\n\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n\r\n      (_$$data$$dropdown$fin3 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Init icon tooltip\r\n\r\n  function initIcons(e) {\r\n    var _e$target;\r\n\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n        tooltipOptions = { ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n    };\r\n    $__default.default(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $__default.default(this);\r\n\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({ ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  } // Init password options\r\n\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n\r\n    if ($__default.default.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default.default(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $__default.default(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n                // Do not use #\r\n            $pb = $pst.find(\".progress-bar\");\r\n\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                  min = ew.MIN_PASSWORD_STRENGTH,\r\n                  valid = percentage >= min;\r\n\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"bg-primary\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($__default.default.fn.pGenerator) {\r\n      $__default.default(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $__default.default(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default.default(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n        qs = params.toString();\r\n\r\n    if ($__default.default.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n\r\n    for (const params of args) {\r\n      if ($__default.default.isObject(params) || $__default.default.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n\r\n    return searchParams;\r\n  }\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  } // Sanitize URL\r\n\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n        searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  } // Set session timer\r\n\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n        timer,\r\n        keepAliveTimer,\r\n        counter,\r\n        useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN; // Keep alive\r\n\r\n    var keepAlive = () => {\r\n      $__default.default.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, token => {\r\n        if (token && $__default.default.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    }; // Reset timer\r\n\r\n    var resetTimer = () => {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n\r\n      if (timer) timer.cancel(); // Clear timer\r\n    }; // Timeout\r\n\r\n    var timeout = () => {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n\r\n      if (counter > 0) {\r\n        let timerInterval;\r\n        let message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n\r\n        Swal.fire({ ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                  min = content.querySelector(\".ew-session-counter-minute\"),\r\n                  sec = content.querySelector(\".ew-session-counter-second\"),\r\n                  timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    }; // Set timer\r\n\r\n    var setTimer = () => {\r\n      resetTimer(); // Reset timer first\r\n\r\n      timer = $__default.default.later(timeoutTime * 1000, null, timeout);\r\n    };\r\n\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default.default.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n        setTimer();\r\n    }\r\n  } // Init export links\r\n\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n\r\n    var el = (_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document;\r\n    $__default.default(el).find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n  } // Init multi-select checkboxes\r\n\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n        $el = $__default.default(el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n          cnt = $els.length,\r\n          len = $els.filter(\":checked\").length;\r\n      $__default.default(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  } // Get error from response\r\n\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $__default.default.isString(result.error) && result.error || result.failureMessage || // Check this first\r\n    result.success === false && result.message || null);\r\n  } // Download file\r\n\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n        swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({ ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n\r\n            let result = await response.json(),\r\n                error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n                url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n              type: \"text/html\"\r\n            }) : data),\r\n                a = document.createElement(\"a\"),\r\n                cd = response.headers.get(\"Content-Disposition\"),\r\n                m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  } // Lazy load images\r\n\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  } // Update select2 dropdown position\r\n\r\n  function updateDropdownPosition() {\r\n    var select = $__default.default(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  } // Colorboxes\r\n\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default.default(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default.default(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  } // PDFObjects\r\n\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default.default(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $__default.default(this),\r\n          url = $this.data(\"url\"),\r\n          html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  } // Tooltips and popovers\r\n\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n        $el = $__default.default(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $__default.default(this);\r\n      $this.tooltip({ ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n  } // Parse JSON\r\n\r\n  function parseJson(data) {\r\n    if ($__default.default.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } // Change search operator\r\n\r\n  function searchOperatorChange(el) {\r\n    let $el = $__default.default(el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n        parm = el.id.substring(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length,\r\n        // Has condition and operator 2\r\n    $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr.includes(\"BETWEEN\"),\r\n        // Can only be operator 1\r\n    isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n        isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isEmptyOpr,\r\n        hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  } // Init forms\r\n\r\n  function initForms(e) {\r\n    var _e$target9;\r\n\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n        ids = ew.forms.ids();\r\n\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  } // Is function\r\n\r\n  function isFunction$1(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.2/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _alert(msg, cb, type) {\r\n    let config = $__default.default.isObject(msg) ? msg : {};\r\n    msg = $__default.default.isString(msg) ? msg : \"\";\r\n    type = $__default.default.isString(cb) ? cb : type;\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$1(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n\r\n    let config = $__default.default.isObject(cfg) ? cfg : {};\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $__default.default.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n\r\n    if (config.input) // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$1(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $__default.default(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  } // Get form.ew-form or div.ew-form HTML element\r\n\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default.default(el),\r\n        $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\");\r\n    return $f[0];\r\n  } // Check form data\r\n\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n        els = $__default.default(form).find(selector).filter(\":enabled\").get();\r\n\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default.default(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default.default(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n        phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n        text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n\r\n    if (!frm) return;\r\n    if (this.form && $__default.default.isUndefined(obj)) // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($__default.default.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n        batch = new Batch();\r\n\r\n    if (Array.isArray(obj) && $__default.default.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n\r\n        var el = getElements(obj[i], f),\r\n            names = [];\r\n        if (isTextbox(el) || isFilter(el)) // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $__default.default(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                  typ = $elf.attr(\"type\"),\r\n                  elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj)) // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(obj),\r\n        $obj = $__default.default(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\r\n      return;\r\n\r\n    if ($__default.default.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default.default.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null ? void 0 : obj.render(); // Selection list\r\n\r\n      selectOption(obj, ar, change);\r\n\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\"); // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default.default.isUndefined(async)) // Async not specified, use default\r\n      async = list.ajax;\r\n\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default.default.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n\r\n      _updateSibling();\r\n\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n          data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"updateoption\",\r\n        language: ew.LANGUAGE_ID,\r\n        name: name // Name of the target element\r\n\r\n      }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n\r\n      if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) || // Not <selection-list> or native <select>\r\n      isModalLookup(obj)) // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n      obj.showLoading == null ? void 0 : obj.showLoading(); // selection-list\r\n\r\n      return $__default.default.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n\r\n          if (error) {\r\n            _alert(error);\r\n\r\n            return;\r\n          }\r\n\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n\r\n          _updateSibling();\r\n\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  } // Get user parameters from id\r\n\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n        o = {};\r\n    var root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default.default(root).find(id) : $__default.default(id);\r\n    var val = $els.val();\r\n\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n\r\n    return o;\r\n  } // Get query builder filter input HTML\r\n\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _document$getElementB2, _span$innerHTML$repla;\r\n\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n          // \"this\" is QueryBuilder\r\n      fldVar = rule.filter.id,\r\n          tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n          span = (_document$getElementB = document.getElementById(tmplId)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.content) == null ? void 0 : _document$getElementB2.cloneNode(true).querySelector(\".ew-search-field\"),\r\n          html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp('(data-field=\")?(\\\\b|_)x_' + fldVar + '\\\\b', \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  } // Get query builder value setter\r\n\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let select = rule.$el.find(\".rule-value-container\").find(\"select, selection-list\")[0];\r\n\r\n      if (select) {\r\n        // Selection list\r\n        select.dataset.field.replace(\"^x_\", \"\");\r\n            let form = forms.get(select),\r\n            values = Array.isArray(value) ? value : $__default.default.isValue(value) ? [value] : [];\r\n        values.forEach(val => newOption(select, {\r\n          lf: val\r\n        }, form));\r\n        ew.selectOption(select, values);\r\n        form.updateList(select, undefined, undefined, true); // Update immediately\r\n      }\r\n\r\n      return null;\r\n    };\r\n  } // Get query builder filter validation object\r\n\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n            errors = 0;\r\n\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $__default.default(this),\r\n                $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null ? void 0 : validators.forEach == null ? void 0 : validators.forEach(validator => {\r\n              let err = validator(this);\r\n\r\n              if ($__default.default.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  } // Apply client side template to a DIV\r\n\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n          // Parent (Modal dialog or document)\r\n      template = parent == null ? void 0 : (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n            subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n\r\n      if ($__default.default.views) {\r\n        let textContent = template.textContent,\r\n            hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n              // HTML-decode comparison operators\r\n          tmpl = $__default.default.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n\r\n    if (exportType && exportType != \"print\") // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  } // Export custom\r\n\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\")) // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n      [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN,\r\n      ...getchartParams()\r\n    };\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  } // Toggle group\r\n\r\n  function toggleGroup(el) {\r\n    var $el = $__default.default(el),\r\n        $tr = $el.closest(\"tr\"),\r\n        selector = \"tr\",\r\n        level;\r\n\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n\r\n      if ($__default.default.isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n\r\n    if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n      // Show\r\n      $__default.default(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.removeClass(\"ew-rpt-grp-hide\");\r\n    } else {\r\n      // Hide\r\n      $__default.default(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.addClass(\"ew-rpt-grp-hide\");\r\n    }\r\n  } // Check if boolean value is true\r\n\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  } // Check if element value changed\r\n\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElements(\"x\" + infix + \"_\" + fld, fobj),\r\n        oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n        // Hidden element\r\n    fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl) // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n            newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  } // Set language\r\n\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n\r\n    let el = e.currentTarget,\r\n        f = args.f || el.form || el.closest(\"form\"),\r\n        $f = $__default.default(f),\r\n        key = args.key,\r\n        action = args.action,\r\n        url = args.url || currentPage(),\r\n        msg = args.msg,\r\n        data = args.data,\r\n        success = args.success,\r\n        isPostBack = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let _success = function (result) {\r\n      showMessage(result);\r\n    };\r\n\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0]) // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else // Hidden tag does not exist, add one\r\n        $__default.default(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n\r\n        if ($__default.default.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n\r\n        if (!isMultiple && $__default.default.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n\r\n        if (parseUrl(url).pathname != currentUrl.pathname) // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else {\r\n        // Ajax\r\n        data = new URLSearchParams(data); // User data\r\n\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          data.set(\"ajax\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n\r\n        data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n\r\n        if (!isMultiple && $__default.default.isObject(key)) // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (success && $__default.default.isString(success)) success = window[success];\r\n        let settings = $__default.default.isObject(success) ? success : {};\r\n        settings.data = data.toString();\r\n        settings.method || (settings.method = \"POST\");\r\n        settings.success || (settings.success = isFunction$1(success) ? success : _success);\r\n        $__default.default.ajax(url, settings);\r\n      }\r\n    };\r\n\r\n    msg = $__default.default.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n\r\n  async function _export(args) {\r\n    let {\r\n      evt,\r\n      url,\r\n      export: type,\r\n      custom,\r\n      exportSelected,\r\n      emailForm\r\n    } = args,\r\n        f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let $f = f ? $__default.default(f) : $__default.default('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]; // Export data\r\n\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $__default.default(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null ? void 0 : _document$querySelect.remove();\r\n        let $iframe = $__default.default(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n\r\n    return el == null ? void 0 : (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n\r\n    return el == null ? void 0 : (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isSelect2(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isNativeSelectOne(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isTextbox(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isBooleanCheckbox(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n\r\n    obj.focus(options);\r\n  }\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n        reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n        reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  } // Check if object has value\r\n\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  } // Check if object value is a masked password\r\n\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default.default(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  } // Sort by field\r\n\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  } // Open table header filter by field\r\n\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $__default.default(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n\r\n  function scrollIntoView(el) {\r\n    var _OverlayScrollbars;\r\n\r\n    let container = el == null ? void 0 : el.closest(\".os-host\"); // Check OverlayScrollbars\r\n\r\n    container ? (_OverlayScrollbars = OverlayScrollbars(container)) == null ? void 0 : _OverlayScrollbars.scroll(el) : el == null ? void 0 : el.scrollIntoView();\r\n  }\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n\r\n    let $el = $__default.default((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $__default.default(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n\r\n    if (!$el[0]) return;\r\n    let {\r\n      url,\r\n      ewAction,\r\n      action\r\n    } = args,\r\n        $f = $grid.find(\"form\"),\r\n        f = $f[0],\r\n        $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n        key = $record.data(\"key\"),\r\n        curindex = $record.data(\"rowindex\"),\r\n        $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f)) // Allow add with no records => no grid\r\n      return; // Fail\r\n\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Always\r\n\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    }; // Success handler for delete\r\n\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response)) // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    }; // Disable inline buttons\r\n\r\n    let _disableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\"); // Enable inline buttons\r\n\r\n    let _enableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\"); // Get table\r\n\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0]; // Update row index\r\n\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    }; // Success handler for inline actions\r\n\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response)) // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n          $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n          $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n          // Find Inline-Add first\r\n      rowindex = $row.data(\"rowindex\"),\r\n          $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0]) // Edit row not found => Error\r\n        return showToast(text);\r\n\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $__default.default(tbl.tBodies).last().append($els);else $__default.default(tbl.tBodies).last().prepend($els);\r\n\r\n            _updateRowIndexes(tbl); // Update row index\r\n\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n\r\n          _disableInlineButtons();\r\n        }\r\n\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n\r\n        if ($row.is(\"TR\")) // Table\r\n          setupTable(_getTable(), true);\r\n\r\n        _disableInlineButtons();\r\n\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    }; // Submit success handler for inline actions\r\n\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n            error = getError(result);\r\n\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n            $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n            $row;\r\n\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n\r\n          if (action == \"insert\") // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\") // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n\r\n          if ([\"edit\", \"multiedit\"].includes(action)) // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\") // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n\r\n        let tbl = _getTable();\r\n\r\n        _updateRowIndexes(tbl); // Update row index\r\n\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null ? void 0 : _$grid$data.replaceAll($record);\r\n        }\r\n\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n\r\n          let body = setSearchParams($f.serialize(), {\r\n            action\r\n          }),\r\n              // Set up action\r\n          p = _fetch(setSearchParams(url, {\r\n            rnd: random()\r\n          }), {\r\n            method: \"POST\",\r\n            body\r\n          }).catch(_fail).finally(() => {\r\n            frm.enableForm();\r\n\r\n            _always();\r\n          });\r\n\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n              form: f,\r\n              result: p\r\n            },\r\n                evt = $__default.default.Event(\"aftersubmit\", {\r\n              originalEvent: args.evt\r\n            });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n            return false;\r\n          }\r\n        }\r\n\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n\r\n            let method = key ? \"GET\" : \"POST\",\r\n                body = deleteSearchParam($f.serialize(), \"action\"),\r\n                frm = forms.get(f.id),\r\n                p = _fetch(setSearchParams(url, {\r\n              action: \"delete\",\r\n              rnd: random()\r\n            }), {\r\n              method,\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n\r\n              _always();\r\n            });\r\n\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n                  evt = $__default.default.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      ew.modalDialogShow({ ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // Confirm inline-delete\r\n\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href) // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n\r\n    return false;\r\n  } // Check if any key selected // PHP\r\n\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  } // Select all keys\r\n\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $__default.default(tbl.tBodies).each(function () {\r\n      $__default.default(this.rows).each(function () {\r\n        let $r = $__default.default(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  } // Select all related checkboxes in the form\r\n\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $__default.default(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  } // Update selected checkbox\r\n\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  } // Clear selected rows color\r\n\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $__default.default(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $__default.default(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  } // Clear all row delete status\r\n\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Click single delete link\r\n\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Select a row\r\n\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n        tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $__default.default(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] Index\r\n   * @param {HTMLTableElement} tbl HTML table element\r\n   * @param {boolean} [force=undefined] Force setup\r\n   * @returns\r\n   */\r\n\r\n  function setupTable() {\r\n    let tbl, force;\r\n\r\n    if ($__default.default.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n\r\n    let $tbl = $__default.default(tbl),\r\n        $rows = $__default.default(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return; // Set selected row color\r\n\r\n    let click = function (e) {\r\n      let $this = $__default.default(this),\r\n          tbl = this.closest(\".ew-table\"),\r\n          $target = $__default.default(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n        // Alternate color every n rows\r\n    rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n      $__default.default(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n    }).get();\r\n\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n\r\n    let form = tbl.closest(\"form\"),\r\n        attach = form && $__default.default(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default.default(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $__default.default(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  } // Setup grid\r\n\r\n  function setupGrid(grid, force) {\r\n    let $grid = $__default.default(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default.default(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n\r\n    grid.dataset.isset = \"true\";\r\n  } // Add a row to grid\r\n\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n        $grid = $__default.default(grid),\r\n        $tbl = $grid.find(\"table.ew-table\").last(),\r\n        $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $__default.default($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n        form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n        $form = $__default.default(form),\r\n        suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n        $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n        keycnt = parseInt($keycnt.val(), 10) + 1,\r\n        name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n        // name=\"k<n>_action\"\r\n    $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\r\n\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $__default.default(this).find(\"*\").each(function () {\r\n        $__default.default.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({ ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($__default.default(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null ? void 0 : frm.initEditors();\r\n    frm == null ? void 0 : frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  } // Delete a row from grid\r\n\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        row = el.closest(\"tr, div[data-rowindex]\"),\r\n        tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n        rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n        form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n        $form = $__default.default(form),\r\n        frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !tbl || !form || !frm) return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n        keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n\r\n      $__default.default(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n\r\n    if (isFunction$1(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // HTML encode text\r\n\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  } // HTML decode text\r\n\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  } // Get form element(s) as single element or array of radio/checkbox\r\n\r\n  function getElements(el, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n\r\n    let $root = root ? $__default.default(root) : $document$1,\r\n        selectors = [],\r\n        getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($__default.default.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n        $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0]) // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\")) // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  } // Get first element by id/name (not necessarily form element)\r\n\r\n  function getElement(name, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default.default(root).find(selector)[0] : $__default.default(selector).first()[0];\r\n  } // Get ancestor by function\r\n\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n\r\n    return null;\r\n  } // Check if an element is hidden\r\n\r\n  function isHidden(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  } // Check if same text\r\n\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  } // Check if same string\r\n\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  } // Convert to header case\r\n\r\n  function headerCase(str) {\r\n    return str.toLowerCase().split(\"_\").map(part => part.charAt(0).toUpperCase() + part.substring(1)).join(\"-\");\r\n  } // Check if same path\r\n\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n          ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) || // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1])) // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n\r\n    return p1 == p2;\r\n  } // Get element value as array for select-multiple field or else as string\r\n\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return undefined;\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $__default.default(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $__default.default(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  } // Get existing selected values as an array\r\n\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return [];\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $__default.default(obj).val();\r\n        return Array.isArray(val) ? val : $__default.default.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  } // Get existing selected values as string\r\n\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  } // Get existing text of selected values as an array\r\n\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return [];\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $__default.default(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return $__default.default(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  } // Clear existing options\r\n\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" || // multiple\r\n      obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n\r\n  function getId(el, remove) {\r\n    var id = $__default.default.isString(el) ? el : $__default.default(el).attr(\"name\") || $__default.default(el).attr(\"id\"); // Use name first (id may have suffix)\r\n\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  } // Get display value separator\r\n\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default.default(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i - 1, obj) : \"\";\r\n      return !$__default.default.isUndefined(sep) && $__default.default.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);else if (options.length) // Some options\r\n      return options.reduce((previous, current) => previous + optionHtml(current), \"\");\r\n    return ew.language.phrase(\"PleaseSelect\"); // No options\r\n  }\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @returns\r\n   */\r\n\r\n  function newOption(obj, data, f) {\r\n    let frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(obj),\r\n        group = data.gf,\r\n        value = data.lf,\r\n        text = list.template && !isAutoSuggest(obj) ? list.template.render(data, ew.jsRenderHelpers) : displayValue(data, obj) || value;\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n      }\r\n\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group) {\r\n          var _obj$querySelector;\r\n\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n\r\n      return args.option.text;\r\n    }\r\n\r\n    return text;\r\n  } // Select combobox option\r\n\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList, _forms$get$getList$pa;\r\n\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n\r\n    if (!obj || !values) return;\r\n    let $obj = $__default.default(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    } // Auto-select if only one option\r\n\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\") // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n        autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null ? void 0 : (_forms$get$getList$pa = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList$pa.length) === 0); // Not search forms and has parent fields\r\n\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  } // Fetch API\r\n\r\n  function _fetch(url, init) {\r\n    var _init, _init$headers, _init$headers$get;\r\n\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n\r\n    if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n      init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n\r\n    if (isApi || (_init$headers = init.headers) != null && (_init$headers$get = _init$headers.get(\"Content-Type\")) != null && _init$headers$get.includes(\"application/json\")) {\r\n      // Add token in headers if sending to API or posting JSON data // PHP\r\n      init.headers.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Send token name in header // PHP\r\n\r\n      init.headers.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Send antiforgery token in header // PHP\r\n    }\r\n\r\n    if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      init.body = mergeSearchParams(init.body, {\r\n        [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n        [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n      }); // Add token name and antiforgery token // PHP\r\n    }\r\n\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  $document$1.ajaxSend(function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n        isApi = url.startsWith(getApiUrl()),\r\n        // Is API request\r\n    allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n\r\n      if (isApi || $__default.default.isString(settings.contentType) && settings.contentType.includes(\"application/json\")) {\r\n        // Add token and antiforgery token in headers if sending to API or posting JSON data // PHP\r\n        jqxhr.setRequestHeader(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME);\r\n        jqxhr.setRequestHeader(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN);\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n          [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n          [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n        }); // Add token name and antiforgery token // PHP\r\n\r\n        settings.data = params.toString();\r\n      }\r\n    }\r\n  }); // Ajax start\r\n\r\n  $document$1.ajaxStart(function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $__default.default(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  }); // Ajax stop (internal)\r\n\r\n  function _ajaxStop() {\r\n    $__default.default(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  } // Ajax stop/error\r\n\r\n  $document$1.ajaxStop(_ajaxStop).ajaxError(_ajaxStop); // Execute JavaScript in HTML loaded by Ajax\r\n\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n        // If modal, scripts in template tags not executed by browser, execute manually\r\n    matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  } // Strip JavaScript in HTML loaded by Ajax\r\n\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  } // Add SCRIPT tag\r\n\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($__default.default.isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  } // Remove JavaScript added by Ajax\r\n\r\n  function removeScript(id) {\r\n    if (id) $__default.default(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n        m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $__default.default(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  } // Get all options of Selection list or Radio/Checkbox list as array\r\n\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n\r\n  function enable2FA() {\r\n    document.body.style.cursor = \"wait\";\r\n\r\n    if (sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      $__default.default.get(url, result => {\r\n        var _result$error4;\r\n\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n              $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n              $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      let html = sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPMobileNumber\");\r\n      $__default.default.get(url, result => {\r\n        var _result$error7;\r\n\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOTP\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"SendOTPFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n                  $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n                  $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error8;\r\n\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error9;\r\n\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $__default.default(\"#enable-2fa\").removeClass(\"d-none\");\r\n        $__default.default(\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n  /**\r\n   * Show dialog for sending one time password\r\n   */\r\n\r\n  function sendOTP(account) {\r\n    _prompt({\r\n      html: ew.language.phrase(\"SendOTPConfirm\"),\r\n      preConfirm: value => {\r\n        let url = account ? getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, account]) : getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP]);\r\n        if (value) return $__default.default.get(url).then(result => {\r\n          var _result$error10;\r\n\r\n          if (result != null && (_result$error10 = result.error) != null && _result$error10.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"SendOTPFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error11;\r\n\r\n      if (result != null && (_result$error11 = result.error) != null && _result$error11.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"SendOTPSuccess\"), \"success\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget); // Hide dialog\r\n\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n\r\n    var $dlg = ew.addOptionDialog || $__default.default(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true); // Submission success\r\n\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n\r\n      var results = data,\r\n          args = $dlg.data(\"args\"),\r\n          frm = forms.get(args.lnk),\r\n          // form object\r\n      objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n          // Get object name from form\r\n      el = args.el,\r\n          // HTML element name\r\n      re = /^x(\\d+)_/,\r\n          m = el.match(re),\r\n          // Check row index\r\n      prefix = m ? m[0] : \"x_\",\r\n          index = m ? m[1] : -1,\r\n          name = el.replace(re, \"x_\"),\r\n          list = frm.getList(el);\r\n      if ($__default.default.isString(data)) results = parseJson(data);\r\n\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n            form = frm.$element[0],\r\n            // HTML form or DIV\r\n        obj = getElements(el, form);\r\n\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n              dfs = list.displayFields.slice(),\r\n              // Clone\r\n          ffs = list.filterFields.slice(),\r\n              // Clone\r\n          pfs = list.parentFields.slice(); // Clone\r\n\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n              row = {\r\n            lf: lfv\r\n          };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i || \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i || \"\")] = result[ff];\r\n          });\r\n\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null) // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n                // Get the parent field values\r\n            args = {\r\n              \"data\": row,\r\n              \"parents\": arp,\r\n              \"valid\": true,\r\n              \"name\": getId(obj),\r\n              \"form\": form\r\n            };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                  txt = newOption(obj, row, form);\r\n\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $__default.default(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default.default(obj).val(lfv).trigger(\"change\");\r\n                  $__default.default(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $__default.default(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n\r\n              var $form = $__default.default(form),\r\n                  suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                  cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                      ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null ? void 0 : obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n              $div = $__default.default(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n\r\n          _alert(msg);\r\n        }\r\n      }\r\n    }; // Fail\r\n\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Submit\r\n\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n          form = $dlg.find(\".modal-body form\")[0],\r\n          frm = forms.get(form.id),\r\n          btn = e == null ? void 0 : e.target,\r\n          $btn = $__default.default(btn);\r\n\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $__default.default.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default.default(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args); // Get form HTML\r\n\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n          prefix = \"x_\",\r\n          m = args.el.match(/^(x\\d+_)/);\r\n      if (m) // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n          pfs = list.parentFields.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n          // Parent field in the same table, add row index\r\n      form = frm.htmlForm,\r\n          ar = pfs.map(pf => getOptionValues(pf, form)),\r\n          ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n          ffs = list.filterFieldVars.slice(); // Clone\r\n\r\n      $dlg.find(\".modal-title\").html($__default.default(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default.default(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        $document$1.one(\"updatedone\", () => {\r\n          ar.forEach((v, i) => {\r\n            let obj = getElements(ffs[i], form);\r\n\r\n            if (obj) {\r\n              if (obj.options || obj.length) {\r\n                // Selection list\r\n                $__default.default(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n              } else {\r\n                selectOption(obj, v);\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      executeScript(data, args.el, true);\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n\r\n          if (obj) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) ; else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n\r\n    $__default.default.get(args.url, success).fail(_fail);\r\n    return false;\r\n  } // Hide Modal dialog\r\n\r\n  function modalDialogHide() {\r\n    let $dlg = $__default.default(this),\r\n        args = $dlg.data(\"args\"),\r\n        frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null ? void 0 : frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt4$currentTar, _args$evt5, _args$evt5$currentTar, _$dlg$data, _$dlg$data2;\r\n\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n      ewAction,\r\n      action\r\n    } = args,\r\n        f = args.f || ((_args$evt4 = args.evt) == null ? void 0 : (_args$evt4$currentTar = _args$evt4.currentTarget) == null ? void 0 : _args$evt4$currentTar.form);\r\n\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let url = args.url || ((_args$evt5 = args.evt) == null ? void 0 : (_args$evt5$currentTar = _args$evt5.currentTarget) == null ? void 0 : _args$evt5$currentTar.dataset.url),\r\n        $dlg = ew.modalDialog || $__default.default(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false; // Size\r\n\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\"); // Caption\r\n\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n          $lnk = $__default.default(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    }; // Button text\r\n\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    }; // Fail\r\n\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Always\r\n\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    }; // Check if current page\r\n\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    }; // Close hidden dialog\r\n\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n\r\n      if (error) {\r\n        _alert(error);\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n\r\n        _hide();\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($__default.default.isBoolean(result.success) && isFunction$1(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            let args = $dlg.data(\"args\");\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $__default.default.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    }; // Create buttons\r\n\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").empty(),\r\n          // Empty the footer\r\n      $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n\r\n            let $this = $__default.default(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\") // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $__default.default(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              if (samePath(this.dataset.href, currentUrl.pathname)) this.setAttribute(\"data-bs-dismiss\", \"modal\");else $__default.default(this).on(\"click\", () => redirect(this.dataset.href));\r\n            } else {\r\n              this.setAttribute(\"data-bs-dismiss\", \"modal\");\r\n            }\r\n          }\r\n\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n\r\n          if (btn) {\r\n            $__default.default('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    }; // Check return URL\r\n\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $__default.default(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    }; // Submit success\r\n\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n\r\n        if (isFunction$1(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n            body = getContent(data).trim(); // Make sure no leading/trailing space\r\n\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $__default.default(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n\r\n            _return(response);\r\n\r\n            return;\r\n          }\r\n\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$1(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n\r\n          _createButtons();\r\n\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n\r\n          _alert(data);\r\n        }\r\n      }\r\n    }; // Submit\r\n\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n          $form = $__default.default(form),\r\n          frm = forms.get(form.id),\r\n          btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $__default.default.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n\r\n          _always();\r\n        });\r\n\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            // Check error before refresh\r\n            let resp = response.clone();\r\n            let ct = resp.headers.get(\"Content-Type\");\r\n            if (!(ct != null && ct.includes(\"json\")) || !getError(await resp.json())) // HTML or JSON without error\r\n              $dlg.modal(\"hide\");\r\n            return response;\r\n          });\r\n          let args = {\r\n            form: form,\r\n            result: p\r\n          },\r\n              evt = $__default.default.Event(\"aftersubmit\", {\r\n            originalEvent: e\r\n          });\r\n          frm.trigger(evt, [args]);\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n\r\n      if ($__default.default.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n            $lnk = $__default.default(args.lnk),\r\n            body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n\r\n        _createButtons();\r\n\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n                // Link inside modal dialog\r\n            $lnk = $__default.default(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true); // Fix for CKEditor\r\n\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\")) // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n\r\n      _createButtons();\r\n\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    }; // Restore previous callback\r\n\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $__default.default.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $__default.default(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $__default.default(\"#ew-import-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        table,\r\n        sse; // Add row to table\r\n\r\n    let addRow = function (result) {\r\n      let {\r\n        row,\r\n        success,\r\n        error,\r\n        count\r\n      } = result,\r\n          callback = () => {\r\n        table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n        if (error) console.log(ew.language.phrase(\"ImportRowError\").replace(\"%i\", count + \" \" + JSON.stringify(row)).replace(\"%e\", error));\r\n      };\r\n\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $__default.default.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                      data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    }; // Enable buttons\r\n\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled); // Show message\r\n\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $__default.default(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    }; // Hide message\r\n\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\"); // Show progress\r\n\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\"); // Hide progress\r\n\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\"); // Upload progress\r\n\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(ew.language.phrase(\"ImportUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n    }; // Update import progress\r\n\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n            cnt = result.count || 0,\r\n            scnt = result.successCount || 0,\r\n            fcnt = result.failCount || 0,\r\n            filename = result.file;\r\n\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename).replace(\"%s\", scnt).replace(\"%e\", fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    }; // Import complete\r\n\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n\r\n      let msg = [],\r\n          result = parseJson(e.data) || {},\r\n          fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n              cnt = fileResult.count || 0,\r\n              scnt = fileResult.successCount || 0,\r\n              fcnt = fileResult.failCount || 0;\r\n          msg.push(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt));\r\n        });\r\n      }\r\n\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(ew.language.phrase(\"ImportMaxFailuresExceeded\").replace(\"%s\", ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      } // hideProgress();\r\n\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null ? void 0 : _sse.close();\r\n    }; // Import fail\r\n\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null ? void 0 : _sse2.close();\r\n    }; // Import file\r\n\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null ? void 0 : _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    }; // Save import\r\n\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null ? void 0 : _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result, _data$result$files;\r\n\r\n          if (Array.isArray(data == null ? void 0 : (_data$result = data.result) == null ? void 0 : (_data$result$files = _data$result.files) == null ? void 0 : _data$result$files.importfiles)) {\r\n            let ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $__default.default(this);\r\n\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null ? void 0 : _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null ? void 0 : _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null ? void 0 : _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  } // Auto-fill\r\n\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n          result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n\r\n        if (destEl) {\r\n          let val = $__default.default.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n              args = {\r\n            results,\r\n            result,\r\n            data: val,\r\n            form: f,\r\n            name: id,\r\n            target: dest_array[j],\r\n            cancel: false,\r\n            trigger: true\r\n          };\r\n          $__default.default(el).trigger(\"autofill\", [args]); // Fire event\r\n\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default.default(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n\r\n          if (args.trigger) $__default.default(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f)); // Add parent field values\r\n\r\n      let parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n\r\n      return $__default.default.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n\r\n    return success();\r\n  } // Set up tooltip links as popovers\r\n\r\n  function tooltip(i, el) {\r\n    var $this = $__default.default(el),\r\n        $tt = $__default.default(\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\",\r\n        dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({ ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd) // Set width before show\r\n          $__default.default(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Init search filters\r\n   */\r\n\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n        btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $__default.default(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n\r\n        let formId = $__default.default(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n            frm = ew.forms.get(formId),\r\n            filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null ? void 0 : (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null ? void 0 : btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $__default.default(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    let form = args.evt.currentTarget.form;\r\n\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $__default.default(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({ ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  } // Export to email\r\n\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({ ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  } // Show drill down\r\n\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n\r\n      return redirect(newUrl);\r\n    }\r\n\r\n    var $obj = $__default.default(obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || \"auto\";\r\n    var args = {\r\n      obj: $obj[0],\r\n      placement: pos,\r\n      id,\r\n      url,\r\n      hdr\r\n    };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({ ...ew.popoverOptions,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        title: args.hdr,\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $__default.default(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        $__default.default.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            var $tip = $__default.default(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + args.hdr).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default.default(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n\r\n              if ($__default.default.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error12, _result$error13;\r\n\r\n                var result = parseJson(o.responseText);\r\n\r\n                if (result != null && (_result$error12 = result.error) != null && _result$error12.type && result != null && (_result$error13 = result.error) != null && _result$error13.description) {\r\n                  popover == null ? void 0 : popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n\r\n              popover == null ? void 0 : popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n\r\n  function ajax(data, callback) {\r\n    if (!$__default.default.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n\r\n    var obj = Object.assign({}, data);\r\n\r\n    var _convert = response => {\r\n      if ($__default.default.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1) // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n\r\n      return response;\r\n    };\r\n\r\n    var url = obj.url || getApiUrl(action),\r\n        // URL\r\n    type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n\r\n    if (isFunction$1(callback)) {\r\n      // Async\r\n      $__default.default.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default.default.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  } // Get URL of current page\r\n\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  } // Toggle search operator\r\n\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  } // Toggle multi-column layout\r\n\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $__default.default(\".ew-multi-column-grid\").html($__default.default(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  } // Copy inner text to clipboard\r\n\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n\r\n    source = $__default.default.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n\r\n    return str;\r\n  }\r\n  /**\r\n   * Validators\r\n   */\r\n  // Check integer\r\n\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  } // Check number\r\n\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim(); // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n\r\n    return ew.parseNumber(object_value) !== null;\r\n  } // Escape regular expression chars\r\n\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  } // Check range\r\n\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    if ($__default.default.isNumber(min_value) || $__default.default.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  } // Check phone\r\n\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  } // Check zip\r\n\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  } // Check credit card\r\n\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n        checkdigit = 0;\r\n\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n\r\n    return checkdigit % 10 == 0;\r\n  } // Check social security number\r\n\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  } // Check emails\r\n\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check email\r\n\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  } // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  } // Check URL\r\n\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check by regular expression\r\n\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n\r\n    let doc, swal;\r\n\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n        $div = $__default.default(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n\r\n    if ($__default.default.isString(arg)) msg = $__default.default(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n            $heading = $alert.find(\".alert-heading\").detach(),\r\n            $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isString(arg)) {\r\n      return swal.fire({ ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  } // Random number\r\n\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  } // File upload\r\n\r\n  function upload(input) {\r\n    let $input = $__default.default(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n        nid = id.replace(/\\$/g, \"\\\\$\"),\r\n        tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $p = $input.closest(fieldContainerSelector),\r\n        $ft = $p.find(\"#ft_\" + nid),\r\n        $fn = $p.find(\"#fn_\" + nid),\r\n        $fa = $p.find(\"#fa_\" + nid),\r\n        $label = $p.find(\".ew-file-label\"),\r\n        label = $label.html();\r\n\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n          ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple) // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n          params = getSearchParams(url),\r\n          fid = params.get(\"id\"),\r\n          name = params.get(fid);\r\n\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n            index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxCount\");\r\n\r\n      if ($__default.default.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      let l = $input.data(\"size\");\r\n\r\n      if ($__default.default.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n\r\n        return false;\r\n      }\r\n    };\r\n\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2, _data$result2$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null ? void 0 : (_data$result2$files = _data$result2.files) == null ? void 0 : _data$result2$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    }; // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n        _downloadTemplate = $__default.default.templates(\"#template-download\"),\r\n        _uploadTemplate = $__default.default.templates(\"#template-upload\"),\r\n        form = getForm(input),\r\n        $form = $__default.default(form),\r\n        readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n\r\n    }, ew.uploadOptions)) // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n\r\n    if ($fn.val()) {\r\n      $__default.default.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default.default.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly) // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Get numbering system\r\n   */\r\n\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon__default.default.DateTime,\r\n      Interval = luxon__default.default.Interval;\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($__default.default.isString(data)) // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($__default.default.isNumber(data)) // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date) // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime) // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n      zone: \"utc\"\r\n    }),\r\n        to = DateTime.fromJSDate(end, {\r\n      zone: \"utc\"\r\n    });\r\n    if (to.isValid && to.equals(to.startOf(\"day\"))) // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end) // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  } // Parse date/time (alias of parseDateTime)\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  } // Check time (alias of checkDate)\r\n\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n\r\n    format = format.replace(\"¤\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n\r\n  function initPage(e) {\r\n    var _e$target12;\r\n\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n        $el = $__default.default(el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null ? void 0 : _localStorage$getItem.split(\",\").forEach(field => $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $__default.default(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n            field = input == null ? void 0 : input.dataset.field;\r\n\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n          inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e); // Report\r\n\r\n    var $rpt = $el.find(\".ew-report\");\r\n\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default.default(this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default.default(this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      }); // Group expand/collapse button\r\n\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    } // Show message\r\n\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  } // Redirect by HTTP GET or POST\r\n\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n\r\n    let newUrl;\r\n\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n\r\n    return false;\r\n  } // Show/Hide password\r\n\r\n  function togglePassword(e) {\r\n    let $btn = $__default.default(e.currentTarget),\r\n        $input = $btn.closest(\".input-group\").find(\"input\"),\r\n        $i = $btn.find(\"i\");\r\n\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  } // Re-order chart\r\n\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n        $container = $__default.default(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n        $overlay = $__default.default(ew.overlayTemplate());\r\n    url.search = $__default.default(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $__default.default(\"<div>\" + (await response.text()) + \"</div>\"),\r\n          $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n          $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  } // Check if larger than mediumn screen width (not mobile)\r\n\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  } // Check if mobile\r\n\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise Promise returned by fetch()\r\n   * @param {string} context CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function refresh(promise, context) {\r\n    context = context && !context.startsWith(\".\") ? \".\" + context : \".ew-card.ew-grid\";\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, main.ew-no-record\");\r\n    if (!target) return;\r\n    let $overlay = $__default.default(ew.overlayTemplate()),\r\n        $target = $__default.default(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\"); // Handle JSON\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n            error = getError(result);\r\n        if (error) showToast(error);else if ($__default.default.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($__default.default.isString(result.message)) showToast(result.message, \"body\");else if ($__default.default.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      } // Handle HTML\r\n\r\n      let html = await response.text(),\r\n          url = new URL(response.url),\r\n          selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\"];\r\n\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n\r\n      let $html = $__default.default(\"<div>\" + html + \"</div>\"); // New HTML\r\n\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString()) // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n\r\n      selectors.forEach(selector => $__default.default(selector).each((i, el) => {\r\n        let $old = $__default.default(el),\r\n            $new = $html.find(selector).eq(i);\r\n\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n\r\n          $old.html($new.html()); // Replace inner HTML\r\n\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null, ew.jsRenderHelpers),\r\n                $html = $__default.default(html),\r\n                $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n                $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $__default.default(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n\r\n      let e = $__default.default.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n\r\n      $__default.default(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($__default.default.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  } // Check if dark mode\r\n\r\n  function isDark() {\r\n    return document.body.classList.contains(\"dark-mode\");\r\n  } // Layout\r\n\r\n  var _fixLayoutHeightTimer; // Fix layout height\r\n\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n\r\n    _fixLayoutHeightTimer = $__default.default.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  } // Add user event handlers\r\n\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $__default.default('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl,\n    forms,\n    AjaxLookup,\n    AutoSuggest,\n    Form,\n    Field,\n    Select2Utils: Utils,\n    Select2Defaults: Defaults,\n    fieldContainerSelector,\n    createSelect,\n    createModalLookup,\n    createFilter,\n    initIcons,\n    initPasswordOptions,\n    getApiUrl,\n    parseUrl,\n    createSearchParams,\n    getSearchParams,\n    getSearchParam,\n    setSearchParams,\n    mergeSearchParams,\n    setSearchParam,\n    deleteSearchParam,\n    buildUrl,\n    setLayout,\n    sanitizeUrl,\n    setSessionTimer,\n    initExportLinks,\n    initMultiSelectCheckboxes,\n    getError,\n    fileDownload,\n    lazyLoad,\n    updateDropdownPosition,\n    initLightboxes,\n    initPdfObjects,\n    initTooltips,\n    parseJson,\n    searchOperatorChange,\n    initForms,\n    isFunction: isFunction$1,\n    alert: _alert,\n    prompt: _prompt,\n    toast,\n    showToast,\n    getForm,\n    hasFormData,\n    setSearchType,\n    updateOptions,\n    getUserParams,\n    getQueryBuilderFilterInput,\n    getQueryBuilderValueSetter,\n    getQueryBuilderFilterValidation,\n    applyTemplate,\n    exportCustom,\n    toggleGroup,\n    convertToBool,\n    valueChanged,\n    setLanguage,\n    submitAction,\n    getchartParams,\n    _export,\n    export: _export,\n    removeSpaces,\n    isHiddenTextArea,\n    isModalLookup,\n    isFilter,\n    isAutoSuggest,\n    isSelect2,\n    isNativeSelectOne,\n    isTextbox,\n    isBooleanCheckbox,\n    clearError,\n    onError,\n    setFocus,\n    setInvalid,\n    setValid,\n    hasValue,\n    isMaskedPassword,\n    sort,\n    filter,\n    scrollIntoView,\n    inlineAction,\n    confirmDelete,\n    keySelected,\n    selectAllKeys,\n    selectAll,\n    updateSelected,\n    clearSelected,\n    clearDelete,\n    clickDelete,\n    selectKey,\n    setupTable,\n    setupGrid,\n    addGridRow,\n    deleteGridRow,\n    htmlEncode,\n    htmlDecode,\n    getElements,\n    getElement,\n    getAncestorBy,\n    isHidden,\n    sameText,\n    sameString,\n    headerCase,\n    samePath,\n    getValue,\n    getOptionValues,\n    getOptionValue,\n    getOptionTexts,\n    clearOptions,\n    getId,\n    valueSeparator,\n    displayValue,\n    optionHtml,\n    optionsHtml,\n    newOption,\n    selectOption,\n    fetch: _fetch,\n    executeScript,\n    stripScript,\n    addScript,\n    removeScript,\n    getContent,\n    getOptions,\n    enable2FA,\n    disable2FA,\n    sendOTP,\n    showBackupCodes,\n    addOptionDialogShow,\n    modalDialogHide,\n    modalDialogShow,\n    importDialogShow,\n    autoFill,\n    tooltip,\n    initSearchFilters,\n    emailDialogShow,\n    exportEmail,\n    showDrillDown,\n    ajax,\n    currentPage,\n    toggleSearchOperator,\n    toggleLayout,\n    copyToClipboard,\n    checkInteger,\n    checkNumber,\n    escapeRegExChars,\n    checkRange,\n    checkPhone,\n    checkZip,\n    checkCreditCard,\n    checkSsn,\n    checkEmails,\n    checkEmail,\n    checkGuid,\n    checkUrl,\n    checkByRegEx,\n    showMessage,\n    random,\n    upload,\n    parseNumber,\n    getNumberingSystem,\n    formatDateTime,\n    formatTimeSpan,\n    parseDateTime,\n    parseDate: parseDateTime,\n    parseTime: parseDateTime,\n    checkDate,\n    checkTime,\n    formatCurrency,\n    formatNumber,\n    formatPercent,\n    initPage,\n    redirect,\n    togglePassword,\n    updateChart,\n    isMediumScreen,\n    isMobile,\n    refresh,\n    isDark,\n    fixLayoutHeight,\n    addEventHandlers\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n      updateTable,\r\n      eventFields,\r\n      addUrl,\r\n      viewUrl,\r\n      editUrl,\r\n      deleteUrl,\r\n      copyUrl,\r\n      fullCalendarOptions,\r\n      eventPopoverOptions\r\n    } = options,\r\n        calendar; // Remove addUrl in options\r\n\r\n    delete options.addUrl; // Update event from server side JSON response\r\n\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/))) // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\") // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $__default.default.isString(value)) // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value) // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value) // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n\r\n      if (data.success) {\r\n        let action = data.action,\r\n            events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null ? void 0 : _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                  value = event[name];\r\n              if (key && value !== undefined) // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                  value = convertValue(key, event[name]);\r\n\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }; // Process event\r\n\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n          events = [event, ...info.relatedEvents],\r\n          apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert if not success\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    }; // Process request\r\n\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n        collapseExtendedProps: true\r\n      }),\r\n          data = {}; // Event fields\r\n\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date) // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\") // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n\r\n      data = { ...data,\r\n        ...obj\r\n      }; // Post to Event Table add/edit/delete API\r\n\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $__default.default.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    }); // Get field parameter\r\n\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name); // Add menu ID to URL\r\n\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    }; // Add/Copy event\r\n\r\n    let addEventDialogShow = data => {\r\n      let url = addUrl,\r\n          params = new URLSearchParams();\r\n\r\n      if ($__default.default.isObject(data) && (data.startStr || data.endStr\r\n      /* || data.allDay */\r\n      )) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n            endFld = getFldParm(eventFields[\"end\"])\r\n        /*,\r\n        allDayFld = getFldParm(eventFields[\"allDay\"])*/\r\n        ;\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr); // if (allDayFld && data.allDay)\r\n        //     params.set(allDayFld, \"1\");\r\n      }\r\n\r\n      if ($__default.default.isString(data) && data.match(/^\\d+$/)) // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: processJson,\r\n        json: true,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    }; // View event\r\n\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    }); // Edit event\r\n\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    }); // Delete event\r\n\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: processJson,\r\n        json: true\r\n      });\r\n    }); // Add custom add button\r\n\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      };\r\n      fullCalendarOptions.headerToolbar.left += \" add\";\r\n    } // Get or create popover\r\n\r\n    let getOrCreatePopover = info => {\r\n      let config = { ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n\r\n      };\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n          template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n        a = parseInt(a.dataset.seq, 10) || 0;\r\n        b = parseInt(b.dataset.seq, 10) || 0;\r\n        return a - b;\r\n      }).shift(),\r\n          tmpl = $__default.default.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n\r\n      let content = tmpl.render(info.event, ew.jsRenderHelpers).trim();\r\n\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n\r\n      return null;\r\n    }; // Context menu\r\n\r\n    let generateGetBoundingClientRect = info => {\r\n      let x = 0,\r\n          y = 0;\r\n\r\n      if (info) {\r\n        let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n        x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n      }\r\n\r\n      return () => ({\r\n        width: 0,\r\n        height: 0,\r\n        top: y,\r\n        right: x,\r\n        bottom: y,\r\n        left: x\r\n      });\r\n    },\r\n        virtualElement = {\r\n      getBoundingClientRect: generateGetBoundingClientRect()\r\n    },\r\n        bsDropdown;\r\n\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n\r\n      document.addEventListener(\"keydown\", event => event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n            action = dataset.action,\r\n            id = dataset.eventId;\r\n\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl) // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    } // Options\r\n\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          if (bsDropdown) {\r\n            var _bootstrap$Popover$ge2;\r\n\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"]);\r\n            });\r\n\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu)\r\n        /* && bsDropdown._element.dataset.eventId == info.event.id*/\r\n        ) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu)\r\n        /* && bsDropdown._element.dataset.eventId == info.event.id*/\r\n        ) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge3.hide();\r\n      }\r\n    }); // Trigger \"calendar\" event\r\n\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $__default.default(document).trigger(\"calendar\", [args]); // Create calendar\r\n\r\n    calendar = new window.FullCalendar.Calendar(el, args.options); // Return calendar\r\n\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Service worker\r\n   */\r\n\r\n  ew__default.default.SERVICE_WORKER = \"sw.js\";\r\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew__default.default.pushDialog || $__default.default(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n\r\n    let target = args.evt.currentTarget,\r\n        // Button\r\n    $form = $__default.default(target.form),\r\n        $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew__default.default.prompt(ew__default.default.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n\r\n      $f.data(\"all\", result);\r\n      if (!result) // Cancelled\r\n        return;\r\n    }\r\n\r\n    if (!frm) {\r\n      frm = new ew__default.default.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $__default.default.post(args.url, data, result => {\r\n          var _result$error;\r\n\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n                failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew__default.default.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew__default.default.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n          base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n          rawData = window.atob(base64),\r\n          outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n\r\n    return outputArray;\r\n  }\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n          token = subscription.getKey(\"auth\"),\r\n          contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew__default.default.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n\r\n    let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n        serviceWorkerReg = await navigator.serviceWorker.ready,\r\n        subscription = await serviceWorkerReg.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: urlBase64ToUint8Array(ew__default.default.PUSH_SERVER_PUBLIC_KEY)\r\n    }),\r\n        result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew__default.default.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n  /**\r\n   * Get subscription\r\n   */\r\n\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n\r\n  function setSubscription(subscription) {\r\n    let $btn = $__default.default(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew__default.default.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew__default.default.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n\r\n  async function checkSubscription() {\r\n    $__default.default(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function unsubscribeNotification() {\r\n    ew__default.default.prompt({\r\n      html: ew__default.default.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n\r\n      try {\r\n        var _result$error3;\r\n\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_DELETE]),\r\n            result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew__default.default.alert(result.error.description);\r\n          return false;\r\n        }\r\n\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew__default.default.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew__default.default.PATH_BASE + ew__default.default.SERVICE_WORKER, {\r\n        scope: ew__default.default.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $__default.default(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $__default.default(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    pushNotificationDialogShow,\n    isPushNotificationSupported,\n    subscribeNotification,\n    checkSubscription,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n\r\n  function show(data) {\r\n    if (data.inited) // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n        $div = $__default.default(\"#\" + data.id),\r\n        useSingleMap = data.useSingleMap,\r\n        showAllMarkers = data.showAllMarkers,\r\n        useMarkerClusterer = data.useMarkerClusterer,\r\n        ext = ew.maps[data.ext];\r\n\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n\r\n      $div = $__default.default(\"#\" + id);\r\n\r\n      if (!$div[0]) {\r\n        $div = $__default.default(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $__default.default(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n\r\n    data.marker = ext.createMarker(data); // Create marker\r\n\r\n    data.inited = true; // Initiated\r\n\r\n    $__default.default(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n  /**\r\n   * All maps initiated\r\n   */\r\n\r\n  function done() {\r\n    $__default.default(\".ew-single-map\").each(function () {\r\n      let data = $__default.default(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n    $__default.default(document).trigger(\"maps\");\r\n  }\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n\r\n  function init(ext) {\r\n    let promises = $__default.default(\".ew-map\").filter(function () {\r\n      return !ext || $__default.default(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $__default.default(this).data();\r\n      if (data.inited) // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n\r\n      data.address = (data.address || \"\").trim();\r\n\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $__default.default.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n            longitude = data.longitude;\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n  /**\r\n   * Init\r\n   */\r\n\r\n  $__default.default(function () {\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", init);\r\n    $__default.default(document).on(\"preview.ew\", init);\r\n  });\n\n  var maps = {\n    __proto__: null,\n    show,\n    done,\n    init\n  };\n\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile(); // Charts\r\n\r\n  window.exportCharts = {}; // Per window\r\n  // Extend\r\n\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $__default.default(document); // Init document\r\n\r\n  loadjs.ready(\"load\", function () {\r\n    $__default.default.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default.default(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default.default(\"html, body\").animate({\r\n      scrollTop: $__default.default(\"#\" + hash).offset().top\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  }); // Default \"addoption\" event (fired before adding new option to selection list)\r\n\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n        // New row to be validated\r\n    arp = args.parents; // Parent field values\r\n\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length) // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\r\n      if (!$__default.default.isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  }); // Click handler for buttons\r\n\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n        action = data.ewAction;\r\n\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $__default.default(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"send-otp\") {\r\n      var _document$getElementB;\r\n\r\n      return ew.sendOTP((_document$getElementB = document.getElementById(data.account)) == null ? void 0 : _document$getElementB.value);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $__default.default(document).scrollTop($__default.default('#top').offset().top);\r\n      return false;\r\n    }\r\n  }) // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n\r\n        (_this$form = this.form) == null ? void 0 : _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n        action = data.ewAction;\r\n\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n\r\n        return false;\r\n      }\r\n    }\r\n  }); // Click handler for row links\r\n\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation()); // Fix z-index of multiple modals\r\n\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default.default(\".modal:visible\").length;\r\n    $__default.default(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default.default(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  }); // Fix scrolling of multiple modals\r\n\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default.default(\".modal:visible\").length && $__default.default(\"body\").addClass(\"modal-open\");\r\n  }); // Crop action for jQuery File Upload\r\n\r\n  $__default.default.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n\r\n  });\r\n  $__default.default.widget(\"blueimp.fileupload\", $__default.default.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $__default.default.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n            dfd = $__default.default.Deferred(),\r\n            that = this;\r\n        let $dlg = ew.cropperDialog || $__default.default(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null ? void 0 : _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  $__default.default.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n          d = data,\r\n          f,\r\n          r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n\r\n  $__default.default.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f,\r\n        tbl,\r\n        infix;\r\n\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n\r\n      tbl = this.data(\"table\"); // table var\r\n\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($__default.default.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n\r\n    if (f && selector) {\r\n      $__default.default(f).find(selector).each(function () {\r\n        let key = this.dataset.field.substring(2),\r\n            // \"data-field\"\r\n        name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default.default(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n\r\n  $__default.default.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data;\r\n\r\n      let $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data2;\r\n\r\n      let $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substring(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables, _ew$vars$tables$table, _ew$vars$tables$table2, _ew$vars$tables$table3;\r\n\r\n      let data = this.data(),\r\n          table = data.table,\r\n          field = data.field.replace(/^[xy]_/, \"\"),\r\n          format = (_ew$vars$tables = ew.vars.tables) == null ? void 0 : (_ew$vars$tables$table = _ew$vars$tables[table]) == null ? void 0 : (_ew$vars$tables$table2 = _ew$vars$tables$table.fields) == null ? void 0 : (_ew$vars$tables$table3 = _ew$vars$tables$table2[field]) == null ? void 0 : _ew$vars$tables$table3.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $__default.default(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      }); // Move the menu to document body if menu inside responsive table\r\n\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen(value, log10(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen(valueAsBase, -log10(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize(baseCreateUnitScaleFromLocaleAbbreviations);\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen(+numberAsString, log10(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes(patternWithoutEscapedText, '(') && stringIncludes(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'ɵnps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'ɵnpe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'ɵs'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'ɵa'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'ɵn'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes(patternMask, `'ɵs'`) || stringIncludes(patternMask, `'ɵnps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'ɵn'`, _ => `'ɵs''ɵn'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize(baseParsePattern);\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'ɵ(nps|npe)'/g, match => match === `'ɵnps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'ɵs'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'ɵs'`, '-');\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'ɵa'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'ɵn'\\s*'ɵa'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'ɵa'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'ɵa'\\s*/, '');\r\n      }\r\n  };\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'ɵn'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'ɵ(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'ɵBPSɵ'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('ɵBPSɵ', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber(number) ? multiplyByPowerOfTen(number, -4) : number;\r\n      },\r\n  };\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber(absoluteValue / 3600);\r\n          const minutes = truncateNumber((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'ɵbytesɵ'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('ɵbytesɵ', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ɵordɵ'`);\r\n          const formatResult = numberToFormattedNumber(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ɵordɵ', _ => localizedOrdinal);\r\n      }\r\n  };\n\n  const currencySymbolsMap = {\r\n      EUR: '€',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '₹',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN¥',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '£',\r\n      HKD: 'HK$',\r\n      ILS: '₪',\r\n      JPY: '¥',\r\n      KRW: '₩',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '₫',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'ɵcurrencyɵ'`);\r\n          const formatResult = numberToFormattedNumber(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('ɵcurrencyɵ', _ => localizedCurrencySymbol);\r\n      },\r\n  };\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'ɵ%ɵ'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('ɵ%ɵ', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen(number, -2) : number;\r\n      },\r\n  };\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber(value) ? multiplyByPowerOfTen(value, powerOfTenExponent) : value;\r\n      },\r\n  };\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter,\r\n      currencyFormatter,\r\n      ordinalFormatter,\r\n      timeFormatter,\r\n      bytesFormatter,\r\n      exponentialFormatter,\r\n      bpsFormatter,\r\n  ];\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale;\r\n      if (!isObject(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero;\r\n          default: return isFunction(roundingOption) ? roundingOption : roundHalfAwayFromZero;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS;\r\n      return isFunction(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$1 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions(options);\r\n      let value;\r\n      if (isNil(input) || isNaNNumber(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1(string, options);\r\n  };\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber(number, precision, roundingFunction);\r\n  };\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '∞' : '-∞';\r\n          }\r\n          else if (isNaNNumber(resolvedValue)) {\r\n              return isString(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil(resolvedValue)) {\r\n              output = isString(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString(arg2) ? arg2 : null;\r\n      const options = isObject(arg2) ? arg2 : (isObject(arg3) ? arg3 : {});\r\n      return format$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject(arg2) ? arg2 : (isObject(arg3) ? arg3 : {});\r\n          return format$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$1 = memoize(baseGetLocaleFromPlatform);\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1(languageTag);\r\n  };\n\n  var numerable = {\n    __proto__: null,\n    parse,\n    round,\n    format,\n    getLocaleFromPlatform\n  };\n\n  Object.assign(ew__default.default, numerable);\n\n})(ew, jQuery, luxon);\n"]}