!function(){"use strict";const e=new WeakMap,t=new WeakMap,a=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,n=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,m=new WeakMap,h={attributes:!0,attributeFilter:["disabled"]},f=new MutationObserver(e=>{for(const t of e){const e=t.target;if(e.constructor.formAssociated){const t=e.hasAttribute("disabled");e.toggleAttribute("internals-disabled",t),t?e.setAttribute("aria-disabled","true"):e.removeAttribute("aria-disabled"),e.formDisabledCallback&&e.formDisabledCallback.apply(e,[t])}}}),p=e=>{a.get(e).forEach(e=>{e.remove()}),a.set(e,[])},g=(e,t)=>{const r=document.createElement("input");return r.type="hidden",r.name=e.getAttribute("name"),e.after(r),a.get(t).push(r),r},b=(e,t)=>{if(t.length){Array.from(t).forEach(t=>t.addEventListener("click",e.click.bind(e)));let a=t[0].id;t[0].id||(a=t[0].htmlFor+"_Label",t[0].id=a),e.setAttribute("aria-labelledby",a)}},y=e=>{const t=Array.from(e.elements).filter(e=>e.validity).map(e=>e.validity.valid),a=s.get(e)||[],i=[...t,...Array.from(a).filter(e=>e.isConnected).map(e=>r.get(e).validity.valid)].includes(!1);e.toggleAttribute("internals-invalid",i),e.toggleAttribute("internals-valid",!i)},w=e=>{y(A(e.target))},E=e=>{y(A(e.target))},v=e=>{const t=s.get(e.target);t&&t.size&&t.forEach(e=>{e.constructor.formAssociated&&e.formResetCallback&&e.formResetCallback.apply(e)})},M=(e,t,a)=>{if(t){const i=s.get(t);if(i)i.add(e);else{const a=new Set;a.add(e),s.set(t,a),(e=>{const t=":is(:is(button, input)[type=submit], button:not([type])):not([disabled])";let a=t+":not([form])";e.id&&(a+=`,${t}[form='${e.id}']`),e.addEventListener("click",t=>{if(t.target.closest(a)){const a=s.get(e);if(e.noValidate)return;a.size&&Array.from(a).reverse().map(e=>r.get(e).reportValidity()).includes(!1)&&t.preventDefault()}})})(t),t.addEventListener("reset",v),t.addEventListener("input",w),t.addEventListener("change",E)}o.set(t,{ref:e,internals:a}),e.constructor.formAssociated&&e.formAssociatedCallback&&setTimeout(()=>{e.formAssociatedCallback.apply(e,[t])},0),y(t)}},A=e=>{let t=e.parentNode;return t&&"FORM"!==t.tagName&&(t=A(t)),t},k=(e,t,a=DOMException)=>{if(!e.constructor.formAssociated)throw new a(t)},x=(e,t,a)=>{const i=s.get(e);return i&&i.size&&i.forEach(e=>{r.get(e)[a]()||(t=!1)}),t},F=e=>{if(e.constructor.formAssociated){const t=r.get(e),{labels:a,form:i}=t;b(e,a),M(e,i,t)}},I={ariaAtomic:"aria-atomic",ariaAutoComplete:"aria-autocomplete",ariaBusy:"aria-busy",ariaChecked:"aria-checked",ariaColCount:"aria-colcount",ariaColIndex:"aria-colindex",ariaColSpan:"aria-colspan",ariaCurrent:"aria-current",ariaDisabled:"aria-disabled",ariaExpanded:"aria-expanded",ariaHasPopup:"aria-haspopup",ariaHidden:"aria-hidden",ariaKeyShortcuts:"aria-keyshortcuts",ariaLabel:"aria-label",ariaLevel:"aria-level",ariaLive:"aria-live",ariaModal:"aria-modal",ariaMultiLine:"aria-multiline",ariaMultiSelectable:"aria-multiselectable",ariaOrientation:"aria-orientation",ariaPlaceholder:"aria-placeholder",ariaPosInSet:"aria-posinset",ariaPressed:"aria-pressed",ariaReadOnly:"aria-readonly",ariaRelevant:"aria-relevant",ariaRequired:"aria-required",ariaRoleDescription:"aria-roledescription",ariaRowCount:"aria-rowcount",ariaRowIndex:"aria-rowindex",ariaRowSpan:"aria-rowspan",ariaSelected:"aria-selected",ariaSetSize:"aria-setsize",ariaSort:"aria-sort",ariaValueMax:"aria-valuemax",ariaValueMin:"aria-valuemin",ariaValueNow:"aria-valuenow",ariaValueText:"aria-valuetext",role:"role"};class T{constructor(){this.badInput=!1,this.customError=!1,this.patternMismatch=!1,this.rangeOverflow=!1,this.rangeUnderflow=!1,this.stepMismatch=!1,this.tooLong=!1,this.tooShort=!1,this.typeMismatch=!1,this.valid=!0,this.valueMissing=!1,Object.seal(this)}}const V=e=>{let t=!0;for(let a in e)"valid"!==a&&!1!==e[a]&&(t=!1);return t};function S(e){const t=r.get(e),{form:a}=t;M(e,a,t),b(e,t.labels)}function L(e){e.forEach(e=>{const{addedNodes:t,removedNodes:i}=e,o=Array.from(t),l=Array.from(i);o.forEach(e=>{if(r.has(e)&&e.constructor.formAssociated&&S(e),c.has(e)){const t=c.get(e);Object.keys(I).filter(e=>null!==t[e]).forEach(a=>{e.setAttribute(I[a],t[a])}),c.delete(e)}if("form"===e.localName){const t=s.get(e),a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>!r.has(e)||t&&t.has(e)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});let i=a.nextNode();for(;i;)S(i),i=a.nextNode()}}),l.forEach(e=>{const t=r.get(e);if(t&&a.get(t)&&p(t),n.has(e)){n.get(e).disconnect()}})})}function O(e){e.forEach(e=>{const{removedNodes:t}=e;t.forEach(t=>{const a=m.get(e.target);r.has(t)&&F(t),a.disconnect()})})}new MutationObserver(L);const C={childList:!0,subtree:!0},N=new WeakMap;class R extends Set{static get isPolyfilled(){return!0}constructor(e){if(super(),!e||!e.tagName||-1===e.tagName.indexOf("-"))throw new TypeError("Illegal constructor");N.set(this,e)}add(e){if(!/^--/.test(e)||"string"!=typeof e)throw new DOMException(`Failed to execute 'add' on 'CustomStateSet': The specified value ${e} must start with '--'.`);const t=super.add(e),a=N.get(this);return a.toggleAttribute("state"+e,!0),a.part&&a.part.add("state"+e),t}clear(){for(let[e]of this.entries())this.delete(e);super.clear()}delete(e){const t=super.delete(e),a=N.get(this);return a.toggleAttribute("state"+e,!1),a.part&&a.part.remove("state"+e),t}}class W{constructor(i){if(!i||!i.tagName||-1===i.tagName.indexOf("-"))throw new TypeError("Illegal constructor");const o=i.getRootNode(),n=new T;this.states=new R(i),e.set(this,i),t.set(this,n),r.set(i,this),((e,t)=>{for(let a in I){t[a]=null;let r=null;const i=I[a];Object.defineProperty(t,a,{get:()=>r,set(a){r=a,e.isConnected?e.setAttribute(i,a):c.set(e,t)}})}})(i,this),((e,t)=>{a.set(t,[]);const r=e.hasAttribute("disabled");e.toggleAttribute("internals-disabled",r),f.observe(e,h)})(i,this),Object.seal(this),F(i),o instanceof DocumentFragment&&(e=>{const t=new MutationObserver(O);t.observe(e,{childList:!0}),m.set(e,t)})(o)}static get isPolyfilled(){return!0}checkValidity(){const a=e.get(this);if(k(a,"Failed to execute 'checkValidity' on 'ElementInternals': The target element is not a form-associated custom element."),!this.willValidate)return!0;const r=t.get(this);if(!r.valid){const e=new Event("invalid",{bubbles:!1,cancelable:!0,composed:!1});a.dispatchEvent(e)}return r.valid}get form(){const t=e.get(this);let a;return k(t,"Failed to read the 'form' property from 'ElementInternals': The target element is not a form-associated custom element."),!0===t.constructor.formAssociated&&(a=A(t)),a}get labels(){const t=e.get(this);k(t,"Failed to read the 'labels' property from 'ElementInternals': The target element is not a form-associated custom element.");const a=t.getAttribute("id"),r=t.getRootNode();return r&&a?r.querySelectorAll(`[for="${a}"]`):[]}reportValidity(){const t=e.get(this);if(k(t,"Failed to execute 'reportValidity' on 'ElementInternals': The target element is not a form-associated custom element."),!this.willValidate)return!0;const a=this.checkValidity(),r=u.get(this);if(r&&!t.constructor.formAssociated)throw new DOMException("Failed to execute 'reportValidity' on 'ElementInternals': The target element is not a form-associated custom element.");return!a&&r&&(t.focus(),r.focus()),a}setFormValue(t){const a=e.get(this);if(k(a,"Failed to execute 'setFormValue' on 'ElementInternals': The target element is not a form-associated custom element."),p(this),null==t||t instanceof FormData)null!=t&&t instanceof FormData&&Array.from(t).reverse().forEach(([e,t])=>{if("string"==typeof t){const r=g(a,this);r.name=e,r.value=t}});else if(a.getAttribute("name")){g(a,this).value=t}l.set(a,t)}setValidity(a,r,o){const n=e.get(this);if(k(n,"Failed to execute 'setValidity' on 'ElementInternals': The target element is not a form-associated custom element."),!a)throw new TypeError("Failed to execute 'setValidity' on 'ElementInternals': 1 argument required, but only 0 present.");u.set(this,o);const s=t.get(this),l={};for(const e in a)l[e]=a[e];var c;0===Object.keys(l).length&&((c=s).badInput=!1,c.customError=!1,c.patternMismatch=!1,c.rangeOverflow=!1,c.rangeUnderflow=!1,c.stepMismatch=!1,c.tooLong=!1,c.tooShort=!1,c.typeMismatch=!1,c.valid=!0,c.valueMissing=!1);const d={...s,...l};delete d.valid;const{valid:m}=((e,t,a)=>(e.valid=V(t),Object.keys(t).forEach(a=>e[a]=t[a]),a&&y(a),e))(s,d,this.form);if(!m&&!r)throw new DOMException("Failed to execute 'setValidity' on 'ElementInternals': The second argument should not be empty if one or more flags in the first argument are true.");i.set(this,m?"":r),n.toggleAttribute("internals-invalid",!m),n.toggleAttribute("internals-valid",m),n.setAttribute("aria-invalid",""+!m)}get shadowRoot(){const t=e.get(this),a=d.get(t);return a||null}get validationMessage(){const t=e.get(this);return k(t,"Failed to read the 'validationMessage' property from 'ElementInternals': The target element is not a form-associated custom element."),i.get(this)}get validity(){const a=e.get(this);k(a,"Failed to read the 'validity' property from 'ElementInternals': The target element is not a form-associated custom element.");return t.get(this)}get willValidate(){const t=e.get(this);return k(t,"Failed to read the 'willValidate' property from 'ElementInternals': The target element is not a form-associated custom element."),!(t.disabled||t.hasAttribute("disabled")||t.hasAttribute("readonly"))}}if(function(){if(!window.ElementInternals||!HTMLElement.prototype.attachInternals)return!1;class e extends HTMLElement{constructor(){super(),this.internals=this.attachInternals()}}const t="element-internals-feature-detection-"+Math.random().toString(36).replace(/[^a-z]+/g,"");customElements.define(t,e);const a=new e;return["shadowRoot","form","willValidate","validity","validationMessage","labels","setFormValue","setValidity","checkValidity","reportValidity"].every(e=>e in a.internals)}()){if(!window.CustomStateSet){window.CustomStateSet=R;const e=HTMLElement.prototype.attachInternals;HTMLElement.prototype.attachInternals=function(...t){const a=e.call(this,t);return a.states=new R(this),a}}}else{window.ElementInternals=W,HTMLElement.prototype.attachInternals=function(){if(!this.tagName)return{};if(-1===this.tagName.indexOf("-"))throw new Error("Failed to execute 'attachInternals' on 'HTMLElement': Unable to attach ElementInternals to non-custom elements.");if(r.has(this))throw new DOMException("DOMException: Failed to execute 'attachInternals' on 'HTMLElement': ElementInternals for the specified element was already attached.");return new W(this)};const e=Element.prototype.attachShadow;Element.prototype.attachShadow=function(...t){const a=e.apply(this,t),r=new MutationObserver(L);return d.set(this,a),window.ShadyDOM?r.observe(this,C):r.observe(a,C),n.set(this,r),a};new MutationObserver(L).observe(document.documentElement,C);const t=HTMLFormElement.prototype.checkValidity;HTMLFormElement.prototype.checkValidity=function(...e){let a=t.apply(this,e);return x(this,a,"checkValidity")};const a=HTMLFormElement.prototype.reportValidity;HTMLFormElement.prototype.reportValidity=function(...e){let t=a.apply(this,e);return x(this,t,"reportValidity")},window.CustomStateSet||(window.CustomStateSet=R)}}();
//# sourceMappingURL=element-internals-polyfill.min.js.map